var pointoriginezoom,pointfinalzoom,lecvlorsduzoom,worker,lalargeurgraphique,lahauteurgraphique,fileURL,getA,getC,getD,getE,labelaxex,intro,nomdelavideo,touteslesvalue,lesvalueabscisse,lesmin,lesmax,oldbrightness,oldcontrast,oldsaturate,oldinvert,oldhuerotate,x1touchfin,x2touchfin,y1touchfin,y2touchfin,ecartorigine,x1touch,x2touch,y1touch,y2touch,ecartnewx,ecartnewy,numdynamiquetablette,vid,cv,context,rect,letempsici,laliste=[],lalistetempsancien=[],isVideoPlaying=!1,nbimagesaut=10,posxcsignanew=0,posycsignanew=0,tabledatatabulator=[],nbimageparsec=50,definiechelleencours=!1,nbdoigtmaxechelle=0,echelledejadefinie=!1,premierpointdefiniechelle=!1,pointoriginechellex=0,pointoriginechelley=0,pointfinechellex=1,pointfinechelley=1,longueurechellereelle=1,encourspinchcourbe=!1,definiorigineencours=!1,autorisationloupeconfig=!0,videochargee=!1,loupeaffiche=!1,seekedokpourredraw=!1,dejainitcanvas=!1,contextgraph=[],cvgraph=[],pointoriginex=.03,pointoriginey=.97,configremiseazer=!1,rayoncinit=150,rayonc=rayoncinit,loinloupe=2,zoom=4,decalageloupex=0,decalageloupey=-rayonc,afficheflechedynamique=-1,ilfautpasseralimagesuivante=!1,firsttableau=!0,sauvagardecanvasgraphique=[],echellex=[],echelley=[],unitey=[],unitex=[],arrayymin=[],arrayxmin=[],arrayymax=[],arrayxmax=[],contextdynamique=[],cvdynamique=[],petitesflechesdejaffichees=!1,surbrillanceencours=!1,numpointbrillant=void 0,oldpointprillant=void 0,numcanvaszoomencours=void 0,lebonipourtablette=0,intervalIDinfotime=0,copiebooldernier=!0,booleffacepoint=!1,trouvepoint=!1,numpointpoubell=-1,margex=.1,margey=.15,largeurvw=80,orientationrepere=0,largeurcanvasgr=[],hauteurcanvasgr=[],extensionaxexmaxencours=!1,extensionaxexminencours=!1,extensionaxeymaxencours=!1,extensionaxeyminencours=!1,calculxmin=0,calculxmax=0,calculymin=0,calculymax=0,calculvreelmin=0,calculvreelmax=0,calculamin=0,calculamax=0,identifianttime=0,getB="",resolutiongraph=2,maxdelta=1e5,mindelta=1e-4,ongletencours="acqui",affichetooltip=!1,reglagezoomencours=!1,loupevideobalise=!0,brightness=100,contrast=100,saturate=100,invert=0,huerotate=0,nbchiffreprecision=6,nbimageparsecondedetecteeparffmpeg=-1,essaienompropr=["tremisazero","xreel","yreel","vxreel","vyreel","vreel","ax","ay","a","Ec","Ep","Em"],jolinompropr=[lesphrasestraduites.tempsunite,lesphrasestraduites.xunite,lesphrasestraduites.yunite,lesphrasestraduites.vxunite,lesphrasestraduites.vyunite,lesphrasestraduites.vunite,lesphrasestraduites.axunite,lesphrasestraduites.ayunite,lesphrasestraduites.aunite,lesphrasestraduites.Ecunite,lesphrasestraduites.Epunite,lesphrasestraduites.Emunite],lesgrandeurs=[lesphrasestraduites.t,lesphrasestraduites.x,lesphrasestraduites.y,lesphrasestraduites.vx,lesphrasestraduites.vy,lesphrasestraduites.v,lesphrasestraduites.ax,lesphrasestraduites.ay,lesphrasestraduites.a,lesphrasestraduites.Ec,lesphrasestraduites.Ep,lesphrasestraduites.Em],lesunites=[lesphrasestraduites.s,lesphrasestraduites.m,lesphrasestraduites.m,lesphrasestraduites.ms,lesphrasestraduites.ms,lesphrasestraduites.ms,lesphrasestraduites.msm2,lesphrasestraduites.msm2,lesphrasestraduites.msm2,lesphrasestraduites.j,lesphrasestraduites.j,lesphrasestraduites.j],listecouleur=["#2bf08f","#82F0F5","#90ee7e","#f45b5b","#7798BF","#B682F5","#ff0066","#FF39E5","#55BF3B","#DF5353","#7798BF","#F03939"],detectpinch=!1,ilfautinitialisertouteslesvariables=!0;let taketime=0;function initvariable(){echelledejadefinie=!1,laliste=[],lalistetempsancien=[],isVideoPlaying=!1,nbimagesaut=10,posxcsignanew=0,posycsignanew=0,tabledatatabulator=[],nbimageparsec=50,definiechelleencours=!1,echelledejadefinie=!1,premierpointdefiniechelle=!1,pointoriginechellex=0,pointoriginechelley=0,pointfinechellex=1,pointfinechelley=1,longueurechellereelle=1,encourspinchcourbe=!1,definiorigineencours=!1,videochargee=!1,loupeaffiche=!1,seekedokpourredraw=!1,dejainitcanvas=!1,petitesflechesdejaffichees=!1,pointoriginex=.03,pointoriginey=.97,loinloupe=2,zoom=4,decalageloupex=0,decalageloupey=-(rayonc=rayoncinit),ilfautpasseralimagesuivante=!1,firsttableau=!0,sauvagardecanvasgraphique=[],echellex=[],echelley=[],unitey=[],unitex=[],arrayymin=[],arrayxmin=[],arrayymax=[],arrayxmax=[],afficheflechedynamique=-1,surbrillanceencours=!1,numpointbrillant=void 0,oldpointprillant=void 0,numcanvaszoomencours=void 0,lebonipourtablette=0,intervalIDinfotime=0,copiebooldernier=!0,booleffacepoint=!1,trouvepoint=!1,numpointpoubell=-1,margex=.1,margey=.15,orientationrepere=0,largeurcanvasgr=[],hauteurcanvasgr=[],extensionaxexmaxencours=!1,extensionaxexminencours=!1,extensionaxeymaxencours=!1,extensionaxeyminencours=!1,calculxmin=0,calculxmax=0,calculymin=0,calculymax=0,calculvreelmin=0,calculvreelmax=0,calculamin=0,calculamax=0,identifianttime=0,resolutiongraph=2,maxdelta=1e5,mindelta=1e-4,ongletencours="acqui",affichetooltip=!1,reglagezoomencours=!1,loupevideobalise=!0,brightness=100,contrast=100,saturate=100,invert=0,huerotate=0,detectpinch=!1}function exportmp4(){window.open(fileURL)}function masqueloupediv(){ledivdeloupe=document.getElementById("divloupecapsule"),ledivdeloupe.style.display="none",loupeaffiche=!1}function afficheloupediv(){ledivdeloupe=document.getElementById("divloupecapsule"),ledivdeloupe.style.display="block",loupeaffiche=!0}function initvarcanvasvideo(){ilfautinitialisertouteslesvariables?initvariable():ilfautinitialisertouteslesvariables=!0,vid=document.getElementById("monfilm"),cv=document.getElementById("cv1"),context=cv.getContext("2d"),vid.controls=!1,loupevideobalise&&(vidloupe=document.getElementById("monfilmloupe"),vidloupe.controls=!1),vid.addEventListener("loadedmetadata",function(){progress.setAttribute("max",vid.duration)}),vid.addEventListener("loadeddata",function(){videochargee=!0,seekedokpourredraw=!0,modalfps.style.display="block",vid.pause(),vid.currentTime=0,pointoriginey=.97/(vid.offsetWidth/vid.offsetHeight),browser_dims=detectdimensionbrowser(),hvideo=vid.offsetHeight,aaa=hvideo/(.8*browser_dims.height),largeurvw/=aaa,inittaillevideo(),redraw()}),loupevideobalise&&vidloupe.addEventListener("loadeddata",function(){vidloupe.pause(),vidloupe.currentTime=0}),vid.addEventListener("timeupdate",function(){progress.getAttribute("max")||progress.setAttribute("max",vid.duration),progress.value=vid.currentTime,progressBar.style.width=Math.floor(vid.currentTime/vid.duration*100)+"%",loupevideobalise&&(isVideoPlaying||(vidloupe.currentTime=vid.currentTime))}),clearInterval(intervalIDinfotime),intervalIDinfotime=setInterval(function(){letempp=Math.round(100*vid.currentTime)/100,letempp=letempp.toString(),-1==letempp.indexOf(".")?letempp+=".00":1==letempp.split(".")[1].length&&(letempp+="0"),infotime.innerHTML=letempp+" s"},100),progress.addEventListener("click",function(e){e.preventDefault(),console.log("click"),isVideoPlaying&&vid.pause();var t=(e.pageX-(this.offsetLeft+this.offsetParent.offsetLeft))/this.offsetWidth;seekedokpourredraw=!1,vid.currentTime=t*vid.duration,loupevideobalise&&(vidloupe.currentTime=vid.currentTime)}),progress.addEventListener("touchmove",function(e){e.preventDefault();var t=e.targetTouches;if(1==t.length){isVideoPlaying&&vid.pause();var a=(t[0].pageX-(this.offsetLeft+this.offsetParent.offsetLeft))/this.offsetWidth;seekedokpourredraw=!1,vid.currentTime=a*vid.duration,loupevideobalise&&(vidloupe.currentTime=vid.currentTime)}}),resize_canvas(vid),vid.addEventListener("seeked",function(e){seekedokpourredraw=!0}),rect=cv.getBoundingClientRect(),cv.addEventListener("mousedown",e=>{if(rect=cv.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,videochargee)if(definiechelleencours)echelledejadefinie&&(oldpointoriginechellex=pointoriginechellex,oldpointoriginechelley=pointoriginechelley,oldpointfinechellex=pointfinechellex,oldpointfinechelley=pointfinechelley),pointoriginechellex=x/vid.offsetWidth,pointoriginechelley=y/vid.offsetWidth,premierpointdefiniechelle=!0;else if(definiorigineencours)pointoriginex=x/vid.offsetWidth,pointoriginey=y/vid.offsetWidth,definiorigineencours=!1,echelledejadefinie&&updatearrayetgraphique();else if(!isVideoPlaying&&seekedokpourredraw)if(booleffacepoint){if(booleffacepoint){if(xpoubelle=x/vid.offsetWidth,ypoubelle=y/vid.offsetWidth,sortie=!1,i=0,trouvepoint=!1,distancepoubellmin=-1,laliste.length>0)for(;!sortie;)i<laliste.length&&(distancepoubell=Math.sqrt(Math.pow(laliste[i].x-xpoubelle,2)+Math.pow(laliste[i].y-ypoubelle,2)),distancepoubell*vid.offsetWidth<8&&(trouvepoint=!0,(-1==distancepoubellmin||distancepoubellmin>distancepoubell)&&(distancepoubellmin=distancepoubell,numpointpoubell=i))),i+=1,i==laliste.length&&(sortie=!0);trouvepoint&&(laliste.splice(numpointpoubell,1),trouvepoint=!1,updatearrayetgraphique())}}else{if(letempsici=vid.currentTime,sortie=!1,i=0,trouvememetemps=!1,laliste.length>0)for(;!sortie;)i<laliste.length&&laliste[i].time-letempsici<frameTime/2&&letempsici-laliste[i].time<=frameTime/2&&(trouvememetemps=!0,laliste[i]={x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec},taketime=performance.now(),sortie=!0),i+=1,i==laliste.length&&(sortie=!0);trouvememetemps||(laliste.push({x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec}),taketime=performance.now()),laliste.sort(function(e,t){return e.time<t.time?-1:e.time==t.time?0:1}),echelledejadefinie&&updatearrayetgraphique(),ilfautpasseralimagesuivante=!0}}),cv.addEventListener("mousemove",e=>{if(rect=cv.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,posxcsignanew=x,posycsignanew=y,isVideoPlaying||(loupeaffiche=!0,loupevideobalise&&autorisationloupeconfig&&afficheloupediv()),booleffacepoint&&(xpoubelle=x/vid.offsetWidth,ypoubelle=y/vid.offsetWidth,sortie=!1,i=0,trouvepoint=!1,distancepoubellmin=-1,laliste.length>0))for(;!sortie;)i<laliste.length&&(distancepoubell=Math.sqrt(Math.pow(laliste[i].x-xpoubelle,2)+Math.pow(laliste[i].y-ypoubelle,2)),distancepoubell*vid.offsetWidth<8&&(trouvepoint=!0,(-1==distancepoubellmin||distancepoubellmin>distancepoubell)&&(distancepoubellmin=distancepoubell,numpointpoubell=i))),i+=1,i==laliste.length&&(sortie=!0)}),cv.addEventListener("mouseleave",e=>{loupeaffiche=!1,loupevideobalise&&masqueloupediv(),rect=cv.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,posxcsignanew=x,posycsignanew=y,premierpointdefiniechelle&&(restaurevieilleechelle(),definiechelleencours=!1,premierpointdefiniechelle=!1)}),cv.addEventListener("mouseup",e=>{rect=cv.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,definiechelleencours&&(pointfinechellex=x/vid.offsetWidth,pointfinechelley=y/vid.offsetWidth,pointoriginechellex==pointfinechellex&&pointoriginechelley==pointfinechelley?(restaurevieilleechelle(),premierpointdefiniechelle=!1,alert(lesphrasestraduites.etalonzero)):(definiechelleencours=!1,echelledejadefinie=!0,premierpointdefiniechelle=!1,loupeaffiche=!1,loupevideobalise&&masqueloupediv(),modal.style.display="block",updatearrayetgraphique()))}),cv.addEventListener("touchstart",handleStartvideo,!1),cv.addEventListener("touchend",handleEndvideo,!1),cv.addEventListener("touchmove",handleMovevideo,!1)}function analyzemessagefps(e){regex1=/.*Stream.* (.*) tbr/i,cherchestp=e.match(regex1),null!=cherchestp&&(nbimageparsecondedetecteeparffmpeg=parseFloat(cherchestp[1]),document.getElementById("idfps").value=nbimageparsecondedetecteeparffmpeg)}!function(e){var t=window.URL||window.webkitURL;const a=document.getElementById("ratioTranscode"),{createWorker:i}=FFmpeg;worker=i({corePath:"./lib/ffmpeg/ffmpeg-core.js",logger:({message:e})=>analyzemessagefps(e),progress:({ratio:e})=>{a.innerHTML=` ${(100*e).toFixed(2)}%`}});var n=async({target:{files:e}})=>{var a=document.getElementById("videoCont"),i=e[0],n=i.type;if(-1==(nomdelavideo=i.name).indexOf(" ")){var A=document.getElementById("monfilm");loupevideobalise&&(oldVidloupe=document.getElementById("divloupecapsule"));var o=document.getElementById("cv1");try{loupevideobalise&&a.removeChild(oldVidloupe),a.removeChild(o),a.removeChild(A)}catch(e){console.log("erreur removechild"+e.message)}var l=document.createElement("video");loupevideobalise&&(divcapsuleloupe=document.createElement("div"),videoNodeloupe=document.createElement("video"));var r=document.createElement("canvas"),s=l.canPlayType(n);""===s&&(s="no");var c="no"===s;if("1"==getE[3]&&(c=!0),c||(fileURL=t.createObjectURL(i)),c){modalTranscode.style.display="block",document.getElementById("idupload").style.display="none",document.getElementById("idnewoneaprestranscode").style.display="inline-block";const a=document.getElementById("messageTranscode"),{name:i}=e[0];a.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+lesphrasestraduites.chargebibli+".<br> ",worker.onmessage=function(e){var t=e.data;console.log(t)},await worker.load(),await worker.write(i,e[0]),a.innerHTML=lesphrasestraduites.conversion+" "+n.replace("video/","")+" -> "+lesphrasestraduites.mp4+' : <i class="fas fa-sun fa-spin"></i> ',await worker.transcode(i,"output.mp4"),a.innerHTML=lesphrasestraduites.finconv;const{data:A}=await worker.read("output.mp4");document.getElementById("output-video");if(fileURL=t.createObjectURL(new Blob([A.buffer],{type:"video/mp4"})),await worker.terminate(),modalTranscode.style.display="none",1==document.getElementById("sauvemp4").checked){let e=document.createElement("a");e.href=fileURL,e.download=i+".mp4",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}modalnomvideoprojet.style.display="none",document.getElementById("moncontainer").style.display="block",document.getElementById("infotime").style.display="block",document.getElementById("infofps").style.display="block",r.id="cv1",r.class="canvas",l.id="monfilm",l.src=fileURL,l.controls="false",l.autoplay="false",loupevideobalise&&(videoNodeloupe.id="monfilmloupe",videoNodeloupe.src=fileURL,videoNodeloupe.controls="false",videoNodeloupe.autoplay="false",divcapsuleloupe.id="divloupecapsule",divcapsuleloupe.class="capsuleloupe"),a.appendChild(l),loupevideobalise&&(a.appendChild(divcapsuleloupe),vConloupe=document.getElementById("divloupecapsule"),vConloupe.appendChild(videoNodeloupe),masqueloupediv()),a.appendChild(r),initvarcanvasvideo(),resize_canvas(vid),laliste.length>0&&updatearrayetgraphique()}else alert(lesphrasestraduites.pasdespace)};document.getElementById("idinputupload").addEventListener("change",n,!1),document.getElementById("idinputuploadprojet").addEventListener("change",n,!1)}(window);var affichagevaleurgraphtooltip=document.getElementById("valeurgraph"),modalfps=document.getElementById("myModalfps"),modalTranscode=document.getElementById("myModalTranscode"),validTranscode=document.getElementById("validTranscode"),closeTranscode=document.getElementById("closeTranscode"),modalcontraste=document.getElementById("myModalcontraste"),closecaptureecran=document.getElementById("closecaptureecran"),modalcaptureecran=document.getElementById("myModalcaptureecran"),btnfps=document.getElementById("idfps"),btnvalidfps=document.getElementById("validfps"),spanfps=document.getElementById("closefps"),closecontrast=document.getElementById("closecontrast"),validcontraste=document.getElementById("validcontraste"),validcaptureecran=document.getElementById("validcaptureecran"),infofps=document.getElementById("infofps"),infotime=document.getElementById("infotime"),modalnomvideoprojet=document.getElementById("Modalnomvideoprojet");modalnomvideoprojet.style.display="none";const resetcontraste=document.getElementById("resetcontraste"),luminoslid=document.getElementById("luminosite"),contrasslid=document.getElementById("Constraste"),saturslid=document.getElementById("Saturation"),invertslid=document.getElementById("Inversion"),huerotateslide=document.getElementById("Decalage");function updateFilters(){vid.style.filter="brightness("+brightness+"%) contrast("+contrast+"%) saturate("+saturate+"%) invert("+invert+"%) hue-rotate("+huerotate+"deg) ",vidloupe.style.filter="brightness("+brightness+"%) contrast("+contrast+"%) saturate("+saturate+"%) invert("+invert+"%) hue-rotate("+huerotate+"deg) "}function lumicontraste(){modalcontraste.style.display="block",definiechelleencours=!1,oldbrightness=brightness,oldcontrast=contrast,oldsaturate=saturate,oldinvert=invert,oldhuerotate=huerotate}function prendsvaleurtemps(){nbimageparsec=parseFloat(document.getElementById("idfps").value.replace(/,/g,".")),isNaN(nbimageparsec)&&(nbimageparsec=25),nbimagesaut=parseInt(document.getElementById("idnbimdeux").value),isNaN(nbimagesaut)&&(nbimagesaut=5),frameTime=1/nbimageparsec,infofps.innerHTML=lesphrasestraduites.echantill+" "+nbimagesaut+" "+lesphrasestraduites.image+" / "+nbimageparsec+" "+lesphrasestraduites.ips,infofps.style.display="block",infotime.style.display="block",infofps.style.right=document.getElementById("monfilm").offsetLeft+"px",infotime.style.left=document.getElementById("monfilm").offsetLeft+"px"}function ShowPresentation(){document.getElementById("idpresentation").style.display="block"}resetcontraste.addEventListener("click",function(){brightness=100,luminoslid.value=100,contrast=100,contrasslid.value=100,saturate=100,saturslid.value=100,invert=0,invertslid.value=0,huerotate=0,huerotateslide.value=0,updateFilters()}),luminoslid.addEventListener("input",function(){brightness=luminoslid.value,updateFilters()}),contrasslid.addEventListener("input",function(){contrast=contrasslid.value,updateFilters()}),saturslid.addEventListener("input",function(){saturate=saturslid.value,updateFilters()}),invertslid.addEventListener("input",function(){invert=invertslid.value,updateFilters()}),huerotateslide.addEventListener("input",function(){huerotate=huerotateslide.value,updateFilters()}),infofps.onclick=function(){document.getElementById("idfps").value=nbimageparsec,modalfps.style.display="block"},spanfps.onclick=function(){modalfps.style.display="none",infofps.style.display="block"},closecontrast.onclick=function(){brightness=oldbrightness,luminoslid.value=brightness,contrast=oldcontrast,contrasslid.value=contrast,saturate=oldsaturate,saturslid.value=saturate,invert=oldinvert,invertslid.value=invert,huerotate=oldhuerotate,huerotateslide.value=huerotate,updateFilters(),modalcontraste.style.display="none"},closecaptureecran.onclick=function(){modalcaptureecran.style.display="none"},validcontraste.onclick=function(){modalcontraste.style.display="none"},validcaptureecran.onclick=function(){modalcaptureecran.style.display="none",screencap()},btnvalidfps.onclick=function(){prendsvaleurtemps(),modalfps.style.display="none"};var videoControls=document.getElementById("video-controls");videoControls.setAttribute("data-state","visible");var progress=document.getElementById("progress"),progressBar=document.getElementById("progress-bar"),supportsProgress=void 0!==document.createElement("progress").max;function playVid(){isVideoPlaying?(vid.pause(),vid.currentTime=Math.round(vid.currentTime/frameTime)*frameTime,isVideoPlaying=!1,loupevideobalise&&(vidloupe.pause(),vidloupe.currentTime=vid.currentTime),document.getElementById("btplay").innerHTML='<i class="fas fa-play  fa-2x"></i>'):(vid.play(),isVideoPlaying=!0,document.getElementById("btplay").innerHTML='<i class="fas fa-equals fa-2x" data-fa-transform="rotate-90"></i>')}function pauseVid(){vid.pause(),vid.currentTime=Math.round(vid.currentTime/frameTime)*frameTime,loupevideobalise&&(vidloupe.pause(),vidloupe.currentTime=vid.currentTime)}function retourdebut(){vid.pause(),vid.currentTime=0,loupevideobalise&&(vidloupe.pause(),vidloupe.currentTime=vid.currentTime)}function resize_canvas(e){var t=e.offsetWidth,a=e.offsetHeight;cv.width=t,cv.height=a,cv.style.position="absolute",cv.style.left=vid.offsetLeft+"px",cv.style.top=vid.offsetTop+"px"}function moinsframe(){seekedokpourredraw=!1,vid.currentTime=Math.max(0,Math.round((vid.currentTime-frameTime)/frameTime)*frameTime)}function plusframe(){seekedokpourredraw=!1,vid.currentTime=Math.min(vid.duration,Math.round((vid.currentTime+frameTime)/frameTime)*frameTime)}function enregistrepre(){if(seekedokpourredraw=!1,sortie=!1,i=0,trouvetard=!1,encemoment=vid.currentTime-frameTime/2,laliste.length>0)for(i=laliste.length-1;!sortie;)i>=0?encemoment>laliste[i].time&&(sortie=!0,trouvetard=!0):sortie=!0,sortie||(i-=1);trouvetard?vid.currentTime=laliste[i].time:vid.currentTime=Math.max(0,Math.round((vid.currentTime-nbimagesaut*frameTime)/frameTime)*frameTime)}function enregistresuiv(){if(seekedokpourredraw=!1,sortie=!1,i=0,trouvetard=!1,encemoment=vid.currentTime+frameTime/2,laliste.length>0)for(;!sortie;)i<laliste.length?encemoment<laliste[i].time&&(sortie=!0,trouvetard=!0):sortie=!0,sortie||(i+=1);trouvetard?vid.currentTime=laliste[i].time:vid.currentTime=Math.min(vid.duration,Math.round((vid.currentTime+nbimagesaut*frameTime)/frameTime)*frameTime)}function drawLine(e,t,a,i,n){e.beginPath(),e.strokeStyle="black",e.lineWidth=1,e.moveTo(t,a),e.lineTo(i,n),e.stroke(),e.closePath()}function croixoblique(e,t,a,i){context.beginPath(),context.lineWidth=a,context.strokeStyle=i,context.moveTo(e-20,t-20),context.lineTo(e+20,t+20),context.moveTo(e+20,t-20),context.lineTo(e-20,t+20),context.stroke(),context.lineWidth=a}function croixhoriz(e,t,a,i){context.save(),context.beginPath(),context.lineWidth=a,context.strokeStyle=i,context.moveTo(e,t-10),context.lineTo(e,t+10),context.moveTo(e-10,t),context.lineTo(e+10,t),context.stroke(),context.lineWidth=a,context.restore()}function unecroix(e,t,a,i){"1"==getE[5]?(intensite=1,intensite-=.1*(i-a),intensite<.2&&(intensite=.2)):intensite=1,context.save(),context.beginPath(),context.lineWidth=2,context.strokeStyle="rgba(255,255,255,"+.8*intensite+")",context.arc(e,t,2,0,6.283),context.stroke(),context.restore(),context.save(),context.beginPath(),context.strokeStyle="rgba(255,100,100,"+intensite+")",context.lineWidth=3,context.arc(e,t,4,0,6.283),context.stroke(),context.restore(),context.save(),context.beginPath(),context.strokeStyle="rgba(255,255,255,"+intensite+")",context.lineWidth=1,context.arc(e,t,6,0,6.283),context.stroke(),context.restore()}function unecroixpoubelle(e,t){context.save(),context.beginPath(),context.strokeStyle="rgba(100,100,255,1)",context.lineWidth=3,context.arc(e,t,4,0,6.283),context.stroke(),context.restore()}function unecroixbleue(e,t){croixhoriz(e,t,4,"blue"),croixhoriz(e,t,1,"black")}function unecroixbl(e,t){temps=Math.round(performance.now())/1e3,virgule=temps-Math.trunc(temps),context.save(),context.beginPath(),context.lineWidth=.5,context.strokeStyle="rgba(255,100,100,"+1*(1-virgule/2)+")",context.moveTo(e-2.2,t),context.lineTo(e-.3,t),context.moveTo(e+.3,t),context.lineTo(e+2.2,t),context.moveTo(e,t-2.2),context.lineTo(e,t-.3),context.moveTo(e,t+.2),context.lineTo(e,t+2.2),context.stroke(),context.restore(),context.save(),context.beginPath(),context.strokeStyle="rgba(255,255,255,"+1*(1-virgule/2)+")",context.lineWidth=2+4*virgule,context.arc(e,t,4+2*virgule,0,6.283),context.stroke(),context.restore(),context.save(),context.beginPath(),context.strokeStyle="rgba(255,100,100,"+1*(1-virgule/2)+")",context.lineWidth=.6,context.arc(e,t,7+4*virgule,0,6.283),context.stroke(),context.restore(),context.save(),context.beginPath(),context.strokeStyle="rgba(255,150,150,"+.6*(1-virgule)+")",context.lineWidth=.6,context.arc(e,t,10+4*virgule,0,6.283),context.stroke(),context.restore()}function effacepoint(){definiechelleencours=!1,booleffacepoint?(booleffacepoint=!1,document.getElementById("effacepoint").innerHTML='<i class="fas fa-trash-alt"></i>',document.getElementById("cv1").style.cssText+="cursor:crosshair;"):(booleffacepoint=!0,document.getElementById("effacepoint").innerHTML='<i class="fas fa-bullseye"></i>',document.getElementById("cv1").style.cssText+='cursor: url("data:image/x-icon;base64,AAACAAEAICAAAAAAAACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAYAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAMAAAAFQAAABwAAAAcAAAAHAAAABwAAAAcAAAAHAAAABwAAAAVAAAADAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAABwAAAAvAAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAAC8AAAAcAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAALAAAAEUAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAARQAAACwAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAFMAAABRAAAANQAAABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/AAAA/wAAAFQAAAA4AAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/AAAAVQAAADkAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP8AAABVAAAAOQAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/wAAAFUAAAA5AAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/AAAAVQAAADkAAAAdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP8AAABVAAAAOwAAAB8AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/qKio/wAAAP+oqKj/AAAA/6ioqP8AAAD/qKio/wAAAP+oqKj/AAAA/wAAAFUAAABCAAAAJQAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAwAAAP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP8AAAD/AAAAVAAAAEcAAAAsAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAMAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAABPAAAAQwAAACkAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/wAAAP8AAAAuAAAAHAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXAAAA/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/qKio/6ioqP+oqKj/AAAA/wAAABUAAAAMAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAABIAAAAiAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAYAAAABgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA/wAAABIAAAAZAAAAEAAAAP8AAAAKAAAAEQAAABcAAAAVAAAAFQAAAP8AAAAXAAAAEQAAAAoAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAgAAAAFAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAAcAAAAFAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA///////////////////////////////////////////////////////////////////////////////////////////wB///4AP//+AD///gA///4AP//+AD///gA///4AP//+AD///gA///wAH//8AB//9gA///O+///xgP//8="),auto;'),sortie=!1,i=0,trouvetard=!1,encemoment=vid.currentTime}function traceviseur(e,t){context.save(),context.beginPath(),context.globalCompositeOperation="difference",context.moveTo(e-8,t),context.lineTo(e+8,t),context.moveTo(e,t-8),context.lineTo(e,t+8),context.lineWidth=1,context.strokeStyle="black",context.stroke(),context.globalCompositeOperation="destination-over",context.moveTo(e-8,t),context.lineTo(e+8,t),context.moveTo(e,t-8),context.lineTo(e,t+8),context.lineWidth=.5,context.strokeStyle="white",context.stroke(),context.globalCompositeOperation="difference",booleffacepoint&&(dexapoubellex=8,dexapoubelley=8,context.moveTo(e+dexapoubellex,dexapoubelley+t),context.lineTo(e+dexapoubellex+10,dexapoubelley+t),context.moveTo(e+dexapoubellex+4,dexapoubelley+t-1),context.lineTo(e+dexapoubellex+6,dexapoubelley+t-1),context.moveTo(e+dexapoubellex+1,dexapoubelley+t+3),context.lineTo(e+dexapoubellex+9,dexapoubelley+t+3),context.moveTo(e+dexapoubellex+1,dexapoubelley+t+13),context.lineTo(e+dexapoubellex+9,dexapoubelley+t+13),context.moveTo(e+dexapoubellex+1,dexapoubelley+t+3),context.lineTo(e+dexapoubellex+1,dexapoubelley+t+13),context.moveTo(e+dexapoubellex+9,dexapoubelley+t+3),context.lineTo(e+dexapoubellex+9,dexapoubelley+t+13),context.moveTo(e+dexapoubellex+3,dexapoubelley+t+3),context.lineTo(e+dexapoubellex+3,dexapoubelley+t+13),context.moveTo(e+dexapoubellex+7,dexapoubelley+t+3),context.lineTo(e+dexapoubellex+7,dexapoubelley+t+13)),context.lineWidth=.5,context.strokeStyle="white",context.stroke(),context.restore()}function effacecentre(){context.save(),rayoncentre=30,context.beginPath(),context.globalCompositeOperation="destination-out",deltatimealpha=Math.round(performance.now())-taketime,deltatimealpha/=800,deltatimealpha>1&&(deltatimealpha=1),deltatimealpha<0&&(deltatimealpha=0);var e=context.createRadialGradient(posxcsignanew,posycsignanew,0,posxcsignanew,posycsignanew,rayoncentre);e.addColorStop(0,"rgba(255,0,0,"+.8*deltatimealpha+")"),e.addColorStop(.6,"rgba(255,0,0,"+.6*deltatimealpha+")"),e.addColorStop(1,"rgba(255,0,0,0)"),context.fillStyle=e,context.arc(posxcsignanew,posycsignanew,rayoncentre,0,2*Math.PI),context.fill(),context.restore()}function loupe(){if(vidpourloupe=document.getElementById("monfilm"),copiebool=!0,decalageactif=!1,"0"==getE[0]&&(decalageloupex=0,decalageloupey=0),xdm=cv.width/2,ydm=cv.height/2,"1"==getE[0]&&(decalageactif=!0,ydm-posycsignanew!=0&&(gamcarre=Math.pow(xdm-posxcsignanew,2)/Math.pow(ydm-posycsignanew,2),decalageloupey=Math.pow(rayonc*rayonc*loinloupe/(1+gamcarre),.5),decalageloupex=Math.pow(rayonc*rayonc*loinloupe/(1+1/gamcarre),.5),posxcsignanew>xdm&&(decalageloupex=-decalageloupex),posycsignanew>ydm&&(decalageloupey=-decalageloupey))),echellevideox=vidpourloupe.offsetWidth/vidpourloupe.videoWidth,echellevideoy=vidpourloupe.offsetHeight/vidpourloupe.videoHeight,loupevideobalise)context.save(),context.beginPath(),context.arc(posxcsignanew+decalageloupex,posycsignanew+decalageloupey,rayonc-2,0,2*Math.PI),context.closePath(),context.clip(),context.clearRect(0,0,vid.offsetWidth,vid.offsetHeight),vidloupe.style.left=-1*posxcsignanew*4+4*rayonc/zoom+"px",vidloupe.style.top=-1*posycsignanew*4+4*rayonc/zoom+"px",vConloupe.style.left=1*posxcsignanew-rayonc+vid.offsetLeft+decalageloupex+"px",vConloupe.style.top=1*posycsignanew-rayonc+vid.offsetTop+decalageloupey+"px",context.stroke();else{context.save(),context.beginPath(),context.arc(posxcsignanew+decalageloupex,posycsignanew+decalageloupey,rayonc-2,0,2*Math.PI,!0),context.clip();try{copiebooldernier&&context.fillRect(posxcsignanew-rayonc+decalageloupex,posycsignanew-rayonc+decalageloupey,2*rayonc,2*rayonc),context.drawImage(vidpourloupe,(posxcsignanew-rayonc/zoom)/echellevideox,(posycsignanew-rayonc/zoom)/echellevideoy,2*rayonc/echellevideox/zoom,2*rayonc/echellevideoy/zoom,posxcsignanew-rayonc+decalageloupex,posycsignanew-rayonc+decalageloupey,2*rayonc,2*rayonc)}catch(e){console.log(lesphrasestraduites.erreurcopie+" "+e.message),copiebool=!1}copiebooldernier=copiebool}if(copiebool){for(context.translate(decalageloupex,decalageloupey),context.translate(posxcsignanew,posycsignanew),context.scale(zoom,zoom),context.translate(-posxcsignanew,-posycsignanew),drawSplinesloupe(),context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)",context.stroke(),letempsila=vidpourloupe.currentTime,i=0;i<laliste.length;i++)letempsila>=laliste[i].time&&(laliste[i].time-letempsila<frameTime/2&&letempsila-laliste[i].time<=frameTime/2?unecroixbl(laliste[i].x*vidpourloupe.offsetWidth,laliste[i].y*vidpourloupe.offsetWidth):unecroix(laliste[i].x*vidpourloupe.offsetWidth,laliste[i].y*vidpourloupe.offsetWidth,i,laliste.length),trouvepoint&&booleffacepoint&&numpointpoubell==i&&unecroixpoubelle(laliste[numpointpoubell].x*vid.offsetWidth,laliste[numpointpoubell].y*vid.offsetWidth));"1"==getE[6]&&(booleffacepoint||effacecentre()),traceechelle(),tracerepere(),decalageactif&&traceviseur(posxcsignanew,posycsignanew)}context.restore(),copiebool&&(context.beginPath(),context.arc(posxcsignanew+decalageloupex,posycsignanew+decalageloupey,rayonc+2,0,2*Math.PI),context.lineWidth=2,context.strokeStyle="grey",context.stroke(),context.beginPath(),context.arc(posxcsignanew+decalageloupex,posycsignanew+decalageloupey,rayonc,0,2*Math.PI),context.lineWidth=4,context.strokeStyle="rgba(255, 255,255, 0.5)",context.stroke())}function handleStartvideo(e){e.preventDefault();var t=e.targetTouches;if(1==t.length){rect=e.target.getBoundingClientRect();var a=document.body.getBoundingClientRect();if(x=t[0].pageX-(rect.left-a.left),y=t[0].pageY-(rect.top-a.top),videochargee)if(definiechelleencours)echelledejadefinie&&(oldpointoriginechellex=pointoriginechellex,oldpointoriginechelley=pointoriginechelley,oldpointfinechellex=pointfinechellex,oldpointfinechelley=pointfinechelley),premierpointdefiniechelle||(identifiantpremierpointechelle=t[0].identifier,premierpointdefiniechelle=!0),pointoriginechellex=x/vid.offsetWidth,pointoriginechelley=y/vid.offsetWidth,pointfinechellex=pointoriginechellex,pointfinechelley=pointoriginechelley,posxcsignanew=x,posycsignanew=y;else if(definiorigineencours)pointoriginex=x/vid.offsetWidth,pointoriginey=y/vid.offsetWidth;else if(!isVideoPlaying&&seekedokpourredraw){if(posxcsignanew=x,posycsignanew=y,isVideoPlaying||(loupeaffiche=!0,loupevideobalise&&autorisationloupeconfig&&afficheloupediv()),booleffacepoint){if(booleffacepoint&&(xpoubelle=x/vid.offsetWidth,ypoubelle=y/vid.offsetWidth,sortie=!1,i=0,trouvepoint=!1,distancepoubellmin=-1,laliste.length>0))for(;!sortie;)i<laliste.length&&(distancepoubell=Math.sqrt(Math.pow(laliste[i].x-xpoubelle,2)+Math.pow(laliste[i].y-ypoubelle,2)),distancepoubell*vid.offsetWidth<41&&(trouvepoint=!0,(-1==distancepoubellmin||distancepoubellmin>distancepoubell)&&(distancepoubellmin=distancepoubell,numpointpoubell=i))),(i+=1)==laliste.length&&(sortie=!0)}else{if(letempsici=vid.currentTime,sortie=!1,i=0,trouvememetemps=!1,laliste.length>0)for(;!sortie;)i<laliste.length&&laliste[i].time-letempsici<frameTime/2&&letempsici-laliste[i].time<=frameTime/2&&(trouvememetemps=!0,lebonipourtablette=i,laliste[i]={x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec},taketime=performance.now(),sortie=!0),(i+=1)==laliste.length&&(sortie=!0);trouvememetemps||(laliste.push({x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec}),taketime=performance.now(),lebonipourtablette=laliste.length-1),laliste.sort(function(e,t){return e.time<t.time?-1:e.time==t.time?0:1})}echelledejadefinie&&updatearrayetgraphique()}}else{rect=e.target.getBoundingClientRect();a=document.body.getBoundingClientRect();if(videochargee&&definiechelleencours){premierpointdefiniechelle||(identifiantpremierpointechelle=t[0].identifier,premierpointdefiniechelle=!0);for(var i=0;i<t.length;i++)t[i].identifier==identifiantpremierpointechelle?(pointoriginechellex=(t[i].pageX-(rect.left-a.left))/vid.offsetWidth,pointoriginechelley=(t[i].pageY-(rect.top-a.top))/vid.offsetWidth):(posxcsignanew=t[i].pageX-(rect.left-a.left),posycsignanew=t[i].pageY-(rect.top-a.top));premierpointdefiniechelle=!0}}}function handleMovevideo(e){e.preventDefault();var t=e.targetTouches;if(1==t.length&&!definiechelleencours){rect=e.target.getBoundingClientRect();var a=document.body.getBoundingClientRect();if(x=t[0].pageX-(rect.left-a.left),y=t[0].pageY-(rect.top-a.top),videochargee)if(definiorigineencours)pointoriginex=x/vid.offsetWidth,pointoriginey=y/vid.offsetWidth;else if(!isVideoPlaying&&seekedokpourredraw)if(posxcsignanew=x,posycsignanew=y,isVideoPlaying||(loupeaffiche=!0,loupevideobalise&&autorisationloupeconfig&&afficheloupediv()),booleffacepoint){if(booleffacepoint&&(xpoubelle=x/vid.offsetWidth,ypoubelle=y/vid.offsetWidth,sortie=!1,i=0,trouvepoint=!1,distancepoubellmin=-1,laliste.length>0))for(;!sortie;)i<laliste.length&&(distancepoubell=Math.sqrt(Math.pow(laliste[i].x-xpoubelle,2)+Math.pow(laliste[i].y-ypoubelle,2)),distancepoubell*vid.offsetWidth<41&&(trouvepoint=!0,(-1==distancepoubellmin||distancepoubellmin>distancepoubell)&&(distancepoubellmin=distancepoubell,numpointpoubell=i))),(i+=1)==laliste.length&&(sortie=!0)}else letempsici=vid.currentTime,sortie=!1,i=0,trouvememetemps=!1,laliste.length>0&&(laliste[lebonipourtablette]={x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec},taketime=performance.now())}if(definiechelleencours&&videochargee){rect=e.target.getBoundingClientRect();a=document.body.getBoundingClientRect();premierpointdefiniechelle||(identifiantpremierpointechelle=t[0].identifier,premierpointdefiniechelle=!0);for(var i=0;i<t.length;i++)t[i].identifier==identifiantpremierpointechelle?(pointoriginechellex=(t[i].pageX-(rect.left-a.left))/vid.offsetWidth,pointoriginechelley=(t[i].pageY-(rect.top-a.top))/vid.offsetWidth):(posxcsignanew=t[i].pageX-(rect.left-a.left),posycsignanew=t[i].pageY-(rect.top-a.top),pointfinechellex=posxcsignanew/vid.offsetWidth,pointfinechelley=posycsignanew/vid.offsetWidth)}}function handleEndvideo(e){e.preventDefault();var t=e.targetTouches;if(videochargee)if(definiechelleencours){if(0==t.length)definiechelleencours=!1,echelledejadefinie=!0,premierpointdefiniechelle=!1,loupeaffiche=!1,loupevideobalise&&masqueloupediv(),modal.style.display="block";else{rect=e.target.getBoundingClientRect(),bodyRect=document.body.getBoundingClientRect();for(var a=0;a<t.length;a++)t[a].identifier==identifiantpremierpointechelle?(pointoriginechellex=(t[a].pageX-(rect.left-bodyRect.left))/vid.offsetWidth,pointoriginechelley=(t[a].pageY-(rect.top-bodyRect.top))/vid.offsetWidth):(posxcsignanew=t[a].pageX-(rect.left-bodyRect.left),posycsignanew=t[a].pageY-(rect.top-bodyRect.top),pointfinechellex=posxcsignanew/vid.offsetWidth,pointfinechelley=posycsignanew/vid.offsetWidth)}echelledejadefinie&&updatearrayetgraphique()}else if(definiorigineencours)pointoriginex=x/vid.offsetWidth,pointoriginey=y/vid.offsetWidth,definiorigineencours=!1,echelledejadefinie&&updatearrayetgraphique();else if(!isVideoPlaying&&seekedokpourredraw){if(posxcsignanew=x,posycsignanew=y,loupeaffiche=!1,loupevideobalise&&masqueloupediv(),booleffacepoint){if(booleffacepoint){if(xpoubelle=x/vid.offsetWidth,ypoubelle=y/vid.offsetWidth,sortie=!1,a=0,trouvepoint=!1,distancepoubellmin=-1,laliste.length>0)for(;!sortie;)a<laliste.length&&(distancepoubell=Math.sqrt(Math.pow(laliste[a].x-xpoubelle,2)+Math.pow(laliste[a].y-ypoubelle,2)),distancepoubell*vid.offsetWidth<41&&(trouvepoint=!0,(-1==distancepoubellmin||distancepoubellmin>distancepoubell)&&(distancepoubellmin=distancepoubell,numpointpoubell=a))),(a+=1)==laliste.length&&(sortie=!0);trouvepoint&&(laliste.splice(numpointpoubell,1),trouvepoint=!1)}}else letempsici=vid.currentTime,sortie=!1,a=0,trouvememetemps=!1,laliste.length>0&&(laliste[lebonipourtablette]={x:x/vid.offsetWidth,y:y/vid.offsetWidth,time:vid.currentTime,numframe:vid.currentTime*nbimageparsec},taketime=performance.now()),ilfautpasseralimagesuivante=!0;echelledejadefinie&&updatearrayetgraphique()}}function definiechelle(){oldechelledejadefinie=echelledejadefinie,definiechelleencours=!0,premierpointdefiniechelle=!1,definiorigineencours=!1}function originecoord(){definiechelleencours=!1,definiorigineencours=!0}function traceechelle(){premierpointdefiniechelle?fleche(pointoriginechellex*vid.offsetWidth,pointoriginechelley*vid.offsetWidth,posxcsignanew,posycsignanew,[20,7,12,1,-12,1,-20,7],"#FE4101"):echelledejadefinie&&fleche(pointoriginechellex*vid.offsetWidth,pointoriginechelley*vid.offsetWidth,pointfinechellex*vid.offsetWidth,pointfinechelley*vid.offsetWidth,[20,7,12,1,-12,1,-20,7],"#FE4101")}function rotationrepere(){definiechelleencours=!1,4==++orientationrepere&&(orientationrepere=0),updatearrayetgraphique()}function tracerepere(){switch(orientationrepere){case 0:fleche(pointoriginex*vid.offsetWidth-1,pointoriginey*vid.offsetWidth,pointoriginex*vid.offsetWidth+.08*vid.offsetWidth,pointoriginey*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879"),fleche(pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth+1,pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth-.08*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879");break;case 1:fleche(pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth+1,pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth-.08*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879"),fleche(pointoriginex*vid.offsetWidth+1,pointoriginey*vid.offsetWidth,pointoriginex*vid.offsetWidth-.08*vid.offsetWidth,pointoriginey*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879");break;case 2:fleche(pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth-1,pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth+.08*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879"),fleche(pointoriginex*vid.offsetWidth-1,pointoriginey*vid.offsetWidth,pointoriginex*vid.offsetWidth-.08*vid.offsetWidth,pointoriginey*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879");break;case 3:fleche(pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth-1,pointoriginex*vid.offsetWidth,pointoriginey*vid.offsetWidth+.08*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879"),fleche(pointoriginex*vid.offsetWidth-1,pointoriginey*vid.offsetWidth,pointoriginex*vid.offsetWidth+.08*vid.offsetWidth,pointoriginey*vid.offsetWidth,[0,1,-12,1,-20,10],"#475879")}}function updatearrayetgraphique(){laliste.length>0&&(calculepointpourtableau(),creertramefondgraphique())}function fleche(e,t,a,i,n,A){context.save(),context.beginPath(),context.fillStyle=A,context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)";var o=a-e,l=i-t,r=Math.sqrt(o*o+l*l),s=l/r,c=o/r,u=[];u.push(0,0);for(var d=0;d<n.length;d+=2){var m=n[d],p=n[d+1];u.push(m<0?r+m:m,p)}u.push(r,0);for(d=n.length;d>0;d-=2){m=n[d-2],p=n[d-1];u.push(m<0?r+m:m,-p)}u.push(0,0);for(d=0;d<u.length;d+=2){m=u[d]*c-u[d+1]*s+e,p=u[d]*s+u[d+1]*c+t;0===d?context.moveTo(m,p):context.lineTo(m,p)}context.fill(),context.restore()}function isIpad(){return/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}function redraw(){if(seekedokpourredraw){for(resize_canvas(vid),context.clearRect(0,0,cv.width,cv.height),lalistetempsancien=[],tempsdepasse=!1,letempsila=vid.currentTime,i=0;i<laliste.length;i++)letempsila>=laliste[i].time?(laliste[i].time-letempsila<frameTime/2&&letempsila-laliste[i].time<=frameTime/2?unecroixbl(laliste[i].x*vid.offsetWidth,laliste[i].y*vid.offsetWidth):unecroix(laliste[i].x*vid.offsetWidth,laliste[i].y*vid.offsetWidth,i,laliste.length),trouvepoint&&booleffacepoint&&numpointpoubell==i&&unecroixpoubelle(laliste[numpointpoubell].x*vid.offsetWidth,laliste[numpointpoubell].y*vid.offsetWidth),lalistetempsancien[i]=JSON.parse(JSON.stringify(laliste[i])),lalistetempsancien[i].x=lalistetempsancien[i].x*vid.offsetWidth,lalistetempsancien[i].y=lalistetempsancien[i].y*vid.offsetWidth):tempsdepasse||(tempsdepasse=!0,i>=1&&(pourcentage=(letempsila-laliste[i-1].time)/(laliste[i].time-laliste[i-1].time),xpourcentage=laliste[i-1].x+(laliste[i].x-laliste[i-1].x)*pourcentage,ypourcentage=laliste[i-1].y+(laliste[i].y-laliste[i-1].y)*pourcentage,lalistetempsancien[i]={x:xpourcentage,y:ypourcentage,time:letempsila,numframe:letempsila*nbimageparsec},lalistetempsancien[i].x=lalistetempsancien[i].x*vid.offsetWidth,lalistetempsancien[i].y=lalistetempsancien[i].y*vid.offsetWidth));drawSplines(),"1"==getE[6]&&(booleffacepoint||effacecentre()),traceechelle(),tracerepere(),isIpad(),loupeaffiche&&autorisationloupeconfig&&loupe(),oldisVideoPlaying=isVideoPlaying,isVideoPlaying=!!(vid.currentTime>=0&&!vid.paused&&!vid.ended&&vid.readyState>=1),isVideoLoupePlaying=!!(vidloupe.currentTime>=0&&!vidloupe.paused&&!vidloupe.ended&&vidloupe.readyState>=1),!isVideoPlaying&&isVideoLoupePlaying&&(vidloupe.pause(),vidloupe.currentTime=vid.currentTime),isVideoPlaying||vidloupe.currentTime!=vid.currentTime&&(vidloupe.currentTime=vid.currentTime),isVideoPlaying&&loupeaffiche&&masqueloupediv(),oldisVideoPlaying!=isVideoPlaying&&(isVideoPlaying||(document.getElementById("btplay").innerHTML='<i class="fas fa-play  fa-2x"></i>')),ilfautpasseralimagesuivante&&(seekedokpourredraw=!1,vid.currentTime=vid.currentTime+nbimagesaut*frameTime,ilfautpasseralimagesuivante=!1)}requestAnimationFrame(redraw)}supportsProgress||progress.setAttribute("data-state","fake"),frameTime=1/nbimageparsec,cestunipad=isIpad();var modalwebcam=document.getElementById("myModalwebcam"),btnwebcam=document.getElementById("myBtn");let preview=document.getElementById("preview"),recording=vid,startButton=document.getElementById("recordgo"),stopButton=document.getElementById("recordstop"),downloadButton=document.getElementById("downloadButtonFilm"),recordingTimeMS=3e4;function log(e){console.log(e)}function wait(e){return new Promise(t=>identifianttime=setTimeout(t,e))}function startRecording(e,t){let a=new MediaRecorder(e),i=[];a.ondataavailable=(e=>i.push(e.data)),a.start(),log(a.state+" for "+t/1e3+" seconds...");let n=new Promise((e,t)=>{a.onstop=e,a.onerror=(e=>t(e.name))}),A=wait(t).then(()=>"recording"==a.state&&a.stop());return Promise.all([n,A]).then(()=>i)}function stop(e){e.getTracks().forEach(e=>e.stop())}function filmewebcam(){modalwebcam.style.display="block"}function dista(e,t,a){return Math.sqrt(Math.pow(e[2*t]-e[2*a],2)+Math.pow(e[2*t+1]-e[2*a+1],2))}function va(e,t,a){return[e[2*a]-e[2*t],e[2*a+1]-e[2*t+1]]}function ctlpts(e,t,a,i,n,A){var o=va(arguments,0,2),l=dista(arguments,0,1),r=dista(arguments,1,2),s=l+r;return[a-.4*o[0]*l/s,i-.4*o[1]*l/s,a+.4*o[0]*r/s,i+.4*o[1]*r/s]}function drawSplines(){cps=[];for(var e=0;e<lalistetempsancien.length-2;e+=1)cps=cps.concat(ctlpts(lalistetempsancien[e].x,lalistetempsancien[e].y,lalistetempsancien[e+1].x,lalistetempsancien[e+1].y,lalistetempsancien[e+2].x,lalistetempsancien[e+2].y));drawCurvedPath(cps,lalistetempsancien)}function drawCurvedPath(e,t){var a=t.length;if(!(a<2)){if(context.save(),2==a)context.beginPath(),context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)",context.moveTo(t[0].x,t[0].y),context.lineTo(t[1].x,t[1].y),context.stroke();else{context.beginPath(),context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)",context.moveTo(t[0].x,t[0].y),context.quadraticCurveTo(e[0],e[1],t[1].x,t[1].y);for(var i=2;i<a-1;i+=1)context.bezierCurveTo(e[2*(2*(i-1)-1)],e[2*(2*(i-1)-1)+1],e[2*(i-1)*2],e[2*(i-1)*2+1],t[i].x,t[i].y);context.quadraticCurveTo(e[2*(2*(i-1)-1)],e[2*(2*(i-1)-1)+1],t[i].x,t[i].y),context.stroke()}context.restore()}}function drawSplinesloupe(){cps=[];for(var e=0;e<lalistetempsancien.length-2;e+=1)cps=cps.concat(ctlpts(lalistetempsancien[e].x,lalistetempsancien[e].y,lalistetempsancien[e+1].x,lalistetempsancien[e+1].y,lalistetempsancien[e+2].x,lalistetempsancien[e+2].y));drawCurvedPathloupe(cps,lalistetempsancien)}function drawCurvedPathloupe(e,t){var a=t.length;if(!(a<2)){if(context.save(),2==a)context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)",context.moveTo(t[0].x,t[0].y),context.lineTo(t[1].x,t[1].y),context.stroke();else{context.shadowOffsetX=0,context.shadowOffsetY=0,context.shadowBlur=2,context.shadowColor="rgba(255,255,255, 1)",context.moveTo(t[0].x,t[0].y),context.quadraticCurveTo(e[0],e[1],t[1].x,t[1].y);for(var i=2;i<a-1;i+=1)context.bezierCurveTo(e[2*(2*(i-1)-1)],e[2*(2*(i-1)-1)+1],e[2*(i-1)*2],e[2*(i-1)*2+1],t[i].x,t[i].y);context.quadraticCurveTo(e[2*(2*(i-1)-1)],e[2*(2*(i-1)-1)+1],t[i].x,t[i].y),context.stroke()}context.restore()}}function restaurevieilleechelle(){definiechelleencours=!1,premierpointdefiniechelle=!1,oldechelledejadefinie?(pointoriginechellex=oldpointoriginechellex,pointoriginechelley=oldpointoriginechelley,pointfinechellex=oldpointfinechellex,pointfinechelley=oldpointfinechelley,echelledejadefinie=!0,updatearrayetgraphique()):(definiechelleencours=!1,echelledejadefinie=!1,premierpointdefiniechelle=!1)}startButton.addEventListener("click",function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>(preview.srcObject=e,downloadButton.href=e,preview.captureStream=preview.captureStream||preview.mozCaptureStream,new Promise(e=>preview.onplaying=e))).then(()=>startRecording(preview.captureStream(),recordingTimeMS)).then(e=>{let t=new Blob(e,{type:"video/webm"});recording.src=URL.createObjectURL(t),downloadButton.href=recording.src,downloadButton.download="RecordedVideo.webm",videochargee=!0,log("Successfully recorded "+t.size+" bytes of "+t.type+" media.")}).catch(log)},!1),stopButton.addEventListener("click",function(){stop(preview.srcObject)},!1);var table,modal=document.getElementById("myModal"),modalpresentation=document.getElementById("idpresentation"),btn=document.getElementById("myBtn"),btnvalidlong=document.getElementById("validlong"),span=document.getElementById("closeechelle"),closepresentation=document.getElementById("closepresentation");function vitessexi1i(e){return returnvx=void 0,void 0!==laliste[e]&&void 0!==laliste[e+1]&&(returnvx=(laliste[e+1].xreel-laliste[e].xreel)/(laliste[e+1].time-laliste[e].time)),returnvx}function vitesseyi1i(e){return returnvy=void 0,void 0!==laliste[e]&&void 0!==laliste[e+1]&&(returnvy=(laliste[e+1].yreel-laliste[e].yreel)/(laliste[e+1].time-laliste[e].time)),returnvy}function gamaxi1i(e){return returnax=void 0,void 0!==laliste[e]&&void 0!==laliste[e+1]&&void 0!==laliste[e].vxreel&&void 0!==laliste[e+1].vxreel&&"undefined"!==laliste[e].vxreel&&"undefined"!==laliste[e+1].vxreel&&(returnax=(laliste[e+1].vxreel-laliste[e].vxreel)/(laliste[e+1].time-laliste[e].time)),returnax}function gamayi1i(e){return returnay=void 0,void 0!==laliste[e]&&void 0!==laliste[e+1]&&void 0!==laliste[e].vyreel&&void 0!==laliste[e+1].vyreel&&"undefined"!==laliste[e].vyreel&&"undefined"!==laliste[e+1].vyreel&&(returnay=(laliste[e+1].vyreel-laliste[e].vyreel)/(laliste[e+1].time-laliste[e].time)),returnay}function vitessex(e){return returnvx=void 0,e>0&&void 0!==laliste[e-1]&&void 0!==laliste[e+1]&&(returnvx=(laliste[e+1].xreel-laliste[e-1].xreel)/(laliste[e+1].time-laliste[e-1].time)),returnvx}function vitessey(e){return returnvy=void 0,e>0&&void 0!==laliste[e-1]&&void 0!==laliste[e+1]&&(returnvy=(laliste[e+1].yreel-laliste[e-1].yreel)/(laliste[e+1].time-laliste[e-1].time)),returnvy}function gamax(e){return returnax=void 0,e>0&&void 0!==laliste[e-1]&&void 0!==laliste[e+1]&&void 0!==laliste[e-1].vxreel&&void 0!==laliste[e+1].vxreel&&"undefined"!==laliste[e-1].vxreel&&"undefined"!==laliste[e+1].vxreel&&(returnax=(laliste[e+1].vxreel-laliste[e-1].vxreel)/(laliste[e+1].time-laliste[e-1].time)),returnax}function gamay(e){return returnay=void 0,e>0&&void 0!==laliste[e-1]&&void 0!==laliste[e+1]&&void 0!==laliste[e-1].vyreel&&void 0!==laliste[e+1].vyreel&&"undefined"!==laliste[e-1].vyreel&&"undefined"!==laliste[e+1].vyreel&&(returnay=(laliste[e+1].vyreel-laliste[e-1].vyreel)/(laliste[e+1].time-laliste[e-1].time)),returnay}function remiset0(){configremiseazer?(configremiseazer=!1,document.getElementById("idremisazero").innerHTML='<i class="far fa-clock"></i>'):(configremiseazer=!0,document.getElementById("idremisazero").innerHTML='<i class="fas fa-history"></i>'),updatearrayetgraphique()}function calculepointpourtableau(){if(Array.isArray(laliste)&&0!=laliste.length){for(tabledatatabulator=[],rapportvideovertsurhor=vid.videoHeight/vid.videoWidth,pourcentageechelle=parseFloat(longueurechellereelle)/Math.sqrt(Math.pow(pointfinechellex-pointoriginechellex,2)+Math.pow(pointfinechelley-pointoriginechelley,2)),calculxextremedejafait=!1,calculyextremedejafait=!1,calculvreelextremedejafait=!1,calculareelextremedejafait=!1,i=0;i<laliste.length;i++){switch(orientationrepere){case 0:deltaorientx=1,deltaorienty=-1;break;case 1:deltaorientx=-1,deltaorienty=-1;break;case 2:deltaorientx=-1,deltaorienty=1;break;case 3:deltaorientx=1,deltaorienty=1}laliste[i].tremisazero=configremiseazer?laliste[i].time-laliste[0].time:laliste[i].time,laliste[i].tremisazero=parseFloat(laliste[i].tremisazero.toPrecision(nbchiffreprecision)),laliste[i].xreel=deltaorientx*(laliste[i].x-pointoriginex)*pourcentageechelle,laliste[i].yreel=deltaorienty*(laliste[i].y-pointoriginey)*pourcentageechelle,calculxextremedejafait?(calculxmin>laliste[i].xreel&&(calculxmin=1*laliste[i].xreel),calculxmax<laliste[i].xreel&&(calculxmax=1*laliste[i].xreel),calculymin>laliste[i].yreel&&(calculymin=1*laliste[i].yreel),calculymax<laliste[i].yreel&&(calculymax=1*laliste[i].yreel)):(calculxmin=1*laliste[i].xreel,calculxmax=1*laliste[i].xreel,calculymin=laliste[i].yreel,calculymax=laliste[i].yreel,calculxextremedejafait=!0),laliste[i].xreel=parseFloat(laliste[i].xreel.toPrecision(nbchiffreprecision)),laliste[i].yreel=parseFloat(laliste[i].yreel.toPrecision(nbchiffreprecision))}for(i=0;i<laliste.length;i++)laliste[i].vxreel=vitessex(i),laliste[i].vyreel=vitessey(i),void 0!==laliste[i].vxreel&&void 0!==laliste[i].vyreel?(laliste[i].vreel=Math.sqrt(Math.pow(laliste[i].vxreel,2)+Math.pow(laliste[i].vyreel,2)),calculvreelextremedejafait?(calculvreelmin>laliste[i].vreel&&(calculvreelmin=1*laliste[i].vreel),calculvreelmax<laliste[i].vreel&&(calculvreelmax=1*laliste[i].vreel)):(calculvreelmin=laliste[i].vreel,calculvreelmax=laliste[i].vreel,calculvreelextremedejafait=!0),laliste[i].vxreel=parseFloat(laliste[i].vxreel.toPrecision(nbchiffreprecision)),laliste[i].vyreel=parseFloat(laliste[i].vyreel.toPrecision(nbchiffreprecision)),laliste[i].vreel=parseFloat(laliste[i].vreel.toPrecision(nbchiffreprecision))):laliste[i].vreel=void 0;for(i=0;i<laliste.length;i++)laliste[i].ax=gamax(i),laliste[i].ay=gamay(i),void 0!==laliste[i].ax&&void 0!==laliste[i].ay?(laliste[i].a=Math.sqrt(Math.pow(laliste[i].ax,2)+Math.pow(laliste[i].ay,2)),calculareelextremedejafait?(calculamin>laliste[i].a&&(calculamin=1*laliste[i].a),calculamax<laliste[i].a&&(calculamax=1*laliste[i].a)):(calculamin=laliste[i].a,calculamax=laliste[i].a,calculareelextremedejafait=!0),laliste[i].ax=parseFloat(laliste[i].ax.toPrecision(nbchiffreprecision)),laliste[i].ay=parseFloat(laliste[i].ay.toPrecision(nbchiffreprecision)),laliste[i].a=parseFloat(laliste[i].a.toPrecision(nbchiffreprecision))):laliste[i].a=void 0;for(i=0;i<laliste.length;i++){for(objettemp={id:i+1,name:i+1},j=0;j<getA.length;j++)if("1"==getA[j])switch(j){case 0:objettemp.temps=laliste[i].tremisazero;break;case 1:objettemp.x=laliste[i].xreel;break;case 2:objettemp.y=laliste[i].yreel;break;case 3:objettemp.vx=laliste[i].vxreel;break;case 4:objettemp.vy=laliste[i].vyreel;break;case 5:objettemp.v=laliste[i].vreel;break;case 6:objettemp.ax=laliste[i].ax;break;case 7:objettemp.ay=laliste[i].ay;break;case 8:objettemp.a=laliste[i].a}tabledatatabulator.push(objettemp)}table.replaceData(tabledatatabulator)}}function exportclipboardpoint(){table.copyToClipboard()}function exportcsv(){var e=document.createElement("a"),t="";arraydesdonnees=table.getData(),"1"==getB[2]?delimiteurcsv=",":delimiteurcsv=";",arraydesdonnees.forEach((e,a)=>{"1"==getB[0]&&0==a&&(t=lesphrasestraduites.numero+delimiteurcsv+(null==e.temps?"":lesphrasestraduites.tempsunite+delimiteurcsv)+(null==e.x?"":lesphrasestraduites.xunite+delimiteurcsv)+(null==e.y?"":lesphrasestraduites.yunite+delimiteurcsv)+(null==e.vx?"":lesphrasestraduites.vxunite+delimiteurcsv)+(null==e.vy?"":lesphrasestraduites.vyunite+delimiteurcsv)+(null==e.v?"":lesphrasestraduites.vunite+delimiteurcsv)+(null==e.ax?"":lesphrasestraduites.axunite+delimiteurcsv)+(null==e.ay?"":lesphrasestraduites.ayunite+delimiteurcsv)+(null==e.a?"":lesphrasestraduites.aunite)+"\r\n"),tempoclip=e.name+delimiteurcsv+(null==e.temps?"":e.temps+delimiteurcsv)+(null==e.x?"":e.x+delimiteurcsv)+(null==e.y?"":e.y+delimiteurcsv)+(null==e.vx?"":e.vx+delimiteurcsv)+(null==e.vy?"":e.vy+delimiteurcsv)+(null==e.v?"":e.v+delimiteurcsv)+(null==e.ax?"":e.ax+delimiteurcsv)+(null==e.ay?"":e.ay+delimiteurcsv)+(null==e.a?"":e.a)+"\r\n","1"==getB[1]&&(tempoclip=tempoclip.replace(/\./g,",")),t+=tempoclip});var a=new Blob([t],{type:"text/csv;charset=UTF-16LE;"}),i=URL.createObjectURL(a);e.href=i,e.setAttribute("download","MecaChrono.csv"),e.click()}function exportxls(){table.download("xlsx","MecaChrono.xlsx",{sheetName:lesphrasestraduites.valeurs})}function exportclipboardvirgule(){pourclipboard="",tempoclip="",arraydesdonnees=table.getData(),arraydesdonnees.forEach((e,t)=>{"1"==getB[0]&&0==t&&(pourclipboard=lesphrasestraduites.numero+"\t"+(null==e.temps?"":lesphrasestraduites.tempsunite+"\t")+(null==e.x?"":lesphrasestraduites.xunite+"\t")+(null==e.y?"":lesphrasestraduites.yunite+"\t")+(null==e.vx?"":lesphrasestraduites.vxunite+"\t")+(null==e.vy?"":lesphrasestraduites.vyunite+"\t")+(null==e.v?"":lesphrasestraduites.vunite+"\t")+(null==e.ax?"":lesphrasestraduites.axunite+"\t")+(null==e.ay?"":lesphrasestraduites.ayunite+"\t")+(null==e.a?"":lesphrasestraduites.aunite)+"\n"),tempoclip=e.name+"\t"+(null==e.temps?"":e.temps+"\t")+(null==e.x?"":e.x+"\t")+(null==e.y?"":e.y+"\t")+(null==e.vx?"":e.vx+"\t")+(null==e.vy?"":e.vy+"\t")+(null==e.v?"":e.v+"\t")+(null==e.ax?"":e.ax+"\t")+(null==e.ay?"":e.ay+"\t")+(null==e.a?"":e.a)+"\n","1"==getB[1]&&(tempoclip=tempoclip.replace(/\./g,",")),pourclipboard+=tempoclip}),navigator.clipboard.writeText(pourclipboard).then(()=>{}).catch(e=>{alert(lesphrasestraduites.alertcopier+" : ",e)})}function exportpython(){pourclipboard="",tempoclip="",arraydesdonnees=table.getData(),variabledefini=[],arraydesdonnees.forEach((e,t)=>{0==t?(tpython=lesphrasestraduites.t+" = [ ",xpython=lesphrasestraduites.x+" = [",ypython=lesphrasestraduites.y+" = [",vxpython=lesphrasestraduites.vx+" = [",vypython=lesphrasestraduites.vy+" = [",vpython=lesphrasestraduites.v+" = [",axpython=lesphrasestraduites.ax+" = [",aypython=lesphrasestraduites.ay+" = [",apython=lesphrasestraduites.a+" = [",tpython+=null==e.temps?"None":e.temps,xpython+=null==e.x?"None":e.x,ypython+=null==e.y?"None":e.y,vxpython+=null==e.vx?"None":e.vx,vypython+=null==e.vy?"None":e.vy,vpython+=null==e.v?"None":e.v,axpython+=null==e.ax?"None":e.ax,aypython+=null==e.ay?"None":e.ay,apython+=null==e.a?"None":e.a,variabledefini.temps=null!=e.temps,variabledefini.x=null!=e.x,variabledefini.y=null!=e.y,variabledefini.vx=null!=e.vx,variabledefini.vy=null!=e.vy,variabledefini.v=null!=e.v,variabledefini.ax=null!=e.ax,variabledefini.ay=null!=e.ay,variabledefini.a=null!=e.a):(tpython+=null==e.temps?", None":", "+e.temps,xpython+=null==e.x?", None":", "+e.x,ypython+=null==e.y?", None":", "+e.y,vxpython+=null==e.vx?", None":", "+e.vx,vypython+=null==e.vy?", None":", "+e.vy,vpython+=null==e.v?", None":", "+e.v,axpython+=null==e.ax?", None":", "+e.ax,aypython+=null==e.ay?", None":", "+e.ay,apython+=null==e.a?", None":", "+e.a,null!=e.temps&&(variabledefini.temps=!0),null!=e.x&&(variabledefini.x=!0),null!=e.y&&(variabledefini.y=!0),null!=e.vx&&(variabledefini.vx=!0),null!=e.vy&&(variabledefini.vy=!0),null!=e.v&&(variabledefini.v=!0),null!=e.ax&&(variabledefini.ax=!0),null!=e.ay&&(variabledefini.ay=!0),null!=e.a&&(variabledefini.a=!0))}),tpython+=""==tpython?"":"]\r\n\r\n",xpython+=""==xpython?"":"]\r\n\r\n",ypython+=""==ypython?"":"]\r\n\r\n",vxpython+=""==vxpython?"":"]\r\n\r\n",vypython+=""==vypython?"":"]\r\n\r\n",vpython+=""==vpython?"":"]\r\n\r\n",axpython+=""==axpython?"":"]\r\n\r\n",aypython+=""==aypython?"":"]\r\n\r\n",apython+=""==apython?"":"]\r\n\r\n",pourclipboard="",variabledefini.temps&&(pourclipboard=tpython),variabledefini.x&&(pourclipboard+=xpython),variabledefini.y&&(pourclipboard+=ypython),variabledefini.vx&&(pourclipboard+=vxpython),variabledefini.vy&&(pourclipboard+=vypython),variabledefini.v&&(pourclipboard+=vpython),variabledefini.ax&&(pourclipboard+=axpython),variabledefini.ay&&(pourclipboard+=aypython),variabledefini.a&&(pourclipboard+=apython),navigator.clipboard.writeText(pourclipboard).then(()=>{alert(lesphrasestraduites.lesdonneesontetecopiees)}).catch(e=>{alert(lesphrasestraduites.alertcopier+"  : ",e)})}function saveproject(){filename="MechaChrono.json",sauvegarde={},sauvegarde.laliste=laliste,sauvegarde.pointoriginechelley=pointoriginechellex,sauvegarde.pointoriginechelley=pointoriginechelley,sauvegarde.pointfinechellex=pointfinechellex,sauvegarde.pointfinechelley=pointfinechelley,sauvegarde.longueurechellereelle=longueurechellereelle,sauvegarde.pointoriginex=pointoriginex,sauvegarde.pointoriginey=pointoriginey,sauvegarde.nomdelavideo=nomdelavideo,sauvegarde.nbimagesaut=nbimagesaut,sauvegarde.nbimageparsec=nbimageparsec,data=JSON.stringify(sauvegarde);var e=new Blob([data],{type:"application/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,filename);else{var t=window.document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=filename,document.body.appendChild(t),t.click(),document.body.removeChild(t)}alert(lesphrasestraduites.alertinclus)}span.onclick=function(){modal.style.display="none",restaurevieilleechelle()},closepresentation.onclick=function(){modalpresentation.style.display="none"},btnvalidlong.onclick=function(){longueurechellereelle=parseFloat(document.getElementById("longetalon").value.replace(/,/g,".")),isNaN(longueurechellereelle)?restaurevieilleechelle():updatearrayetgraphique(),modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none",restaurevieilleechelle()),e.target==modalwebcam&&(modalwebcam.style.display="none"),e.target==modalfps&&(modalfps.style.display="none"),e.target==modalcontraste&&(brightness=oldbrightness,luminoslid.value=brightness,contrast=oldcontrast,contrasslid.value=contrast,saturate=oldsaturate,saturslid.value=saturate,invert=oldinvert,invertslid.value=invert,huerotate=oldhuerotate,huerotateslide.value=huerotate,updateFilters(),modalcontraste.style.display="none"),e.target==modalpresentation&&(modalpresentation.style.display="none"),e.target==modalcaptureecran&&(modalcaptureecran.style.display="none")};var fileInputjson=document.getElementById("idinputproject");fileInputjson.addEventListener("change",function(e){var t=fileInputjson.files[0];if(t.type.match(".json$","i")){var a=new FileReader;a.onload=function(e){initvariable(),ilfautinitialisertouteslesvariables=!1,lesdata=JSON.parse(a.result),laliste=lesdata.laliste,pointoriginechellex=lesdata.pointoriginechellex,pointoriginechelley=lesdata.pointoriginechelley,pointfinechellex=lesdata.pointfinechellex,pointfinechelley=lesdata.pointfinechelley,longueurechellereelle=lesdata.longueurechellereelle,pointoriginex=lesdata.pointoriginex,pointoriginey=lesdata.pointoriginey,nomdelavideo=lesdata.nomdelavideo,nbimagesaut=lesdata.nbimagesaut,nbimageparsec=lesdata.nbimageparsec,echelledejadefinie=!0,document.getElementById("idfps").setAttribute("value",nbimageparsec),document.getElementById("idnbimdeux").setAttribute("value",nbimagesaut),modalnomvideoprojet.style.display="block"},a.readAsText(t)}else alert(lesphrasestraduites.bonfichier)});var leschartdynamiques=document.getElementsByClassName("canvasdynamique");function xmouseverscourbe(e,t,a){return Xdansgraph=echellex[e]*(t-margex*largeurcanvasgr[e])+arrayxmin[e],Ydansgraph=-(a-(1-margey)*hauteurcanvasgr[e])*echelley[e]+arrayymin[e],lereturn={x:Xdansgraph,y:Ydansgraph},lereturn}function xcourbeverscanvas(e,t,a){return xcanvas=margex*largeurcanvasgr[e]+(t-arrayxmin[e])/echellex[e],ycanvas=(1-margey)*hauteurcanvasgr[e]-(a-arrayymin[e])/echelley[e],lereturn={x:xcanvas,y:ycanvas},lereturn}function cherchepoint(e,t,a){for(trouve=!1,bonlli=void 0,distance=void 0,lli=0,lexy=xcourbeverscanvas(e,t,a);lli<laliste.length;)Math.abs(lesvalueabscisse[lli]-t)<unitex[e]&&Math.abs(touteslesvalue[e][lli]-a)<unitey[e]&&(trouve=!0,lesv=xcourbeverscanvas(e,lesvalueabscisse[lli],touteslesvalue[e][lli]),(void 0===distance||distance>Math.sqrt(Math.pow(lesv.x-lexy.x,2)+Math.pow(lesv.y-lexy.y,2)))&&(distance=Math.sqrt(Math.pow(lesv.x-lexy.x,2)+Math.pow(lesv.y-lexy.y,2)),bonlli=lli)),lli++;return trouve?bonlli:void 0}function surbrillance(){if(reglagezoomencours&&(contextdynamique[numcanvaszoomencours].clearRect(0,0,cvdynamique[numcanvaszoomencours].width,cvdynamique[numcanvaszoomencours].height),contextdynamique[numcanvaszoomencours].save(),contextdynamique[numcanvaszoomencours].fillStyle="rgba(50,50,50,0.4)",contextdynamique[numcanvaszoomencours].fillRect(pointoriginezoom.x,pointoriginezoom.y,pointfinalzoom.x-pointoriginezoom.x,pointfinalzoom.y-pointoriginezoom.y),contextdynamique[numcanvaszoomencours].strokeStyle="rgba(0,0,0,1)",contextdynamique[numcanvaszoomencours].strokeRect(pointoriginezoom.x,pointoriginezoom.y,pointfinalzoom.x-pointoriginezoom.x,pointfinalzoom.y-pointoriginezoom.y),contextdynamique[numcanvaszoomencours].restore()),void 0!==numpointbrillant){for(affichetooltip&&(phrasetooltip="n°"+numpointbrillant+"<br>"+lesgrandeurs[getC]+" = "+lesvalueabscisse[numpointbrillant].toPrecision(4)+" "+lesunites[getC]+"<br>"),numc=0;numc<getA.length;numc++)"1"==getA[numc]&&numc!=getC&&(numc==numcanvaszoomencours&&reglagezoomencours||contextdynamique[numc].clearRect(0,0,cvdynamique[numc].width,cvdynamique[numc].height),void 0!==touteslesvalue[numc][numpointbrillant]&&void 0!==lesvalueabscisse[numpointbrillant]&&(diametrepoint=Math.min(largeurcanvasgr[numc]/50,hauteurcanvasgr[numc]/50),coordcanv=xcourbeverscanvas(numc,lesvalueabscisse[numpointbrillant],touteslesvalue[numc][numpointbrillant]),contextdynamique[numc].save(),contextdynamique[numc].beginPath(),contextdynamique[numc].arc(coordcanv.x,coordcanv.y,diametrepoint,0,6.2832),contextdynamique[numc].fillStyle=listecouleur[numc],contextdynamique[numc].globalAlpha=.3,contextdynamique[numc].fill(),contextdynamique[numc].beginPath(),contextdynamique[numc].globalAlpha=1,contextdynamique[numc].moveTo(coordcanv.x,hauteurcanvasgr[numc]*(1-margey)),contextdynamique[numc].lineTo(coordcanv.x,coordcanv.y),contextdynamique[numc].moveTo(largeurcanvasgr[numc]*margex,coordcanv.y),contextdynamique[numc].lineTo(coordcanv.x,coordcanv.y),contextdynamique[numc].lineWidth=4,contextdynamique[numc].setLineDash([14,16]),contextdynamique[numc].strokeStyle="#FFFFFF",contextdynamique[numc].stroke(),fontsizeresult=20,contextdynamique[numc].font=fontsizeresult+"px Arial",contextdynamique[numc].textAlign="right",contextdynamique[numc].textBaseline="bottom",contextdynamique[numc].fillText(lesgrandeurs[numc]+" = "+touteslesvalue[numc][numpointbrillant].toPrecision(4)+" "+lesunites[numc],(1-1*margex/2)*largeurcanvasgr[numc],.5*margey*hauteurcanvasgr[numc]),contextdynamique[numc].restore(),phrasetooltip+=lesgrandeurs[numc]+" = "+touteslesvalue[numc][numpointbrillant].toPrecision(4)+" "+lesunites[numc]+"<br>"));affichetooltip&&(affichetooltip=!1,affichagevaleurgraphtooltip.innerHTML=phrasetooltip)}window.requestAnimationFrame(surbrillance)}function initchartdynamique(){for(var e=0;e<leschartdynamiques.length;e++){function t(e){e.preventDefault(),numdynamiquetablette=e.target.getAttribute("data-numcanvas");var t=e.targetTouches;if(1==t.length){rect=e.target.getBoundingClientRect();var a=document.body.getBoundingClientRect();x=t[0].pageX-(rect.left-a.left),x=t[0].pageX-(rect.left-a.left),y=t[0].pageY-(rect.top-a.top),x=x/cvgraph[numdynamiquetablette].offsetWidth*largeurcanvasgr[numdynamiquetablette],y=y/cvgraph[numdynamiquetablette].offsetHeight*hauteurcanvasgr[numdynamiquetablette],coordsouris=xmouseverscourbe(numdynamiquetablette,x,y),oldpointbrillant=numpointbrillant,numpointbrillant=cherchepoint(numdynamiquetablette,coordsouris.x,coordsouris.y),oldpointprillant!==numpointbrillant&&(affichetooltip=!0,affichagevaleurgraphtooltip.style.display="inline-block ")}if(2==t.length){rect=e.target.getBoundingClientRect();a=document.body.getBoundingClientRect();x1touch=Math.min(t[0].pageX-(rect.left-a.left),t[1].pageX-(rect.left-a.left)),y1touch=Math.min(t[0].pageY-(rect.top-a.top),t[1].pageY-(rect.top-a.top)),x2touch=Math.max(t[0].pageX-(rect.left-a.left),t[1].pageX-(rect.left-a.left)),y2touch=Math.max(t[0].pageY-(rect.top-a.top),t[1].pageY-(rect.top-a.top)),x1touch=x1touch/cvgraph[numdynamiquetablette].offsetWidth*largeurcanvasgr[numdynamiquetablette],y1touch=y1touch/cvgraph[numdynamiquetablette].offsetHeight*hauteurcanvasgr[numdynamiquetablette],x2touch=x2touch/cvgraph[numdynamiquetablette].offsetWidth*largeurcanvasgr[numdynamiquetablette],y2touch=y2touch/cvgraph[numdynamiquetablette].offsetHeight*hauteurcanvasgr[numdynamiquetablette],ecartoriginex=Math.abs(x2touch-x1touch),ecartoriginey=Math.abs(y2touch-y1touch),les1=xmouseverscourbe(numdynamiquetablette,x1touch,y1touch),les2=xmouseverscourbe(numdynamiquetablette,x2touch,y2touch),x1touchsansconversion=x1touch,x2touchsansconversion=x2touch,y1touchsansconversion=y1touch,y2touchsansconversion=y2touch,lalargeurgraphique=arrayxmax[numdynamiquetablette]-arrayxmin[numdynamiquetablette],lahauteurgraphique=arrayymax[numdynamiquetablette]-arrayymin[numdynamiquetablette],x1touch=les1.x,y1touch=les1.y,x2touch=les2.x,y2touch=les2.y,detectpinch=!0,xmilieu=(x2touch-x1touch)/2,ymilieu=(y2touch-y1touch)/2,arrayymaxpitch=arrayymax[numdynamiquetablette],arrayxmaxpitch=arrayxmax[numdynamiquetablette],arrayyminpitch=arrayymin[numdynamiquetablette],arrayxminpitch=arrayxmin[numdynamiquetablette]}}function a(e){e.preventDefault();var t=e.changedTouches,a=(e.targetTouches,e.touches);moyenneX=0,moyenneY=0;for(var i=0;i<a.length;i++)moyenneX+=a[i].pageX,moyenneY+=a[i].pageY;if(moyenneX/=a.length,moyenneY/=a.length,detectpinch&&2==t.length){rect=e.target.getBoundingClientRect();var n=document.body.getBoundingClientRect();x1touchfin=Math.min(a[0].pageX-(rect.left-n.left),a[1].pageX-(rect.left-n.left)),y1touchfin=Math.min(a[0].pageY-(rect.top-n.top),a[1].pageY-(rect.top-n.top)),x2touchfin=Math.max(a[0].pageX-(rect.left-n.left),a[1].pageX-(rect.left-n.left)),y2touchfin=Math.max(a[0].pageY-(rect.top-n.top),a[1].pageY-(rect.top-n.top)),x1touchfin=x1touchfin/cvgraph[numdynamiquetablette].offsetWidth*largeurcanvasgr[numdynamiquetablette],y1touchfin=y1touchfin/cvgraph[numdynamiquetablette].offsetHeight*hauteurcanvasgr[numdynamiquetablette],x2touchfin=x2touchfin/cvgraph[numdynamiquetablette].offsetWidth*largeurcanvasgr[numdynamiquetablette],y2touchfin=y2touchfin/cvgraph[numdynamiquetablette].offsetHeight*hauteurcanvasgr[numdynamiquetablette],x1touchfinsansconversion=x1touchfin,x2touchfinsansconversion=x2touchfin,y1touchfinsansconversion=y1touchfin,y2touchfinsansconversion=y2touchfin,les1fin=xmouseverscourbe(numdynamiquetablette,x1touchfin,y1touchfin),les2fin=xmouseverscourbe(numdynamiquetablette,x2touchfin,y2touchfin),x1touchfin=les1fin.x,y1touchfin=les1fin.y,x2touchfin=les2fin.x,y2touchfin=les2fin.y,ecartnewx=Math.abs(x2touchfinsansconversion-x1touchfinsansconversion),ecartnewy=Math.abs(y2touchfinsansconversion-y1touchfinsansconversion);moyenneX,rect.left,n.left,moyenneY,rect.top,n.top;for(arrayxmintempo=x1touch-Math.abs((x2touch-x1touch)*(x1touchfinsansconversion-1*margex*largeurcanvasgr[numdynamiquetablette])/(x2touchfinsansconversion-x1touchfinsansconversion)),scalex=ecartnewx/ecartoriginex,arrayxmaxtempo=arrayxmin[numdynamiquetablette]+Math.abs(lalargeurgraphique/scalex),arrayymin[numdynamiquetablette]=y1touch-Math.abs((y2touch-y1touch)*((1-margey)*hauteurcanvasgr[numdynamiquetablette]-y1touchfinsansconversion)/(y2touchfinsansconversion-y1touchfinsansconversion)),scaley=ecartnewy/ecartoriginey,arrayymax[numdynamiquetablette]=arrayymin[numdynamiquetablette]+Math.abs(lahauteurgraphique/scaley),j=0;j<getA.length;j++)encourspinchcourbe=!0,"1"==getA[j]&&j!=getC&&(contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),arrayxmax[j]=arrayxmaxtempo,arrayxmin[j]=arrayxmintempo,traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]));encourspinchcourbe=!1}}leschartdynamiques[e].addEventListener("touchstart",t,!1),leschartdynamiques[e].addEventListener("touchmove",a,!1),leschartdynamiques[e].addEventListener("mouseleave",e=>{for(numdynamique=e.target.getAttribute("data-numcanvas"),afficheflechedynamique=-1,j=0;j<getA.length;j++)encourspinchcourbe=!0,"1"==getA[j]&&j!=getC&&(contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]));petitesflechesdejaffichees=!1}),leschartdynamiques[e].addEventListener("mousemove",e=>{if(numdynamique=e.target.getAttribute("data-numcanvas"),afficheflechedynamique=numdynamique,!petitesflechesdejaffichees){for(j=0;j<getA.length;j++)encourspinchcourbe=!0,"1"==getA[j]&&j!=getC&&(contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]));petitesflechesdejaffichees=!0}rect=e.target.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,x=x/cvgraph[numdynamique].offsetWidth*largeurcanvasgr[numdynamique],y=y/cvgraph[numdynamique].offsetHeight*hauteurcanvasgr[numdynamique],x>largeurcanvasgr[numdynamique]*margex&&x<largeurcanvasgr[numdynamique]*(1-margex)&&y>hauteurcanvasgr[numdynamique]*margey&&y<hauteurcanvasgr[numdynamique]*(1-margey)&&(reglagezoomencours?pointfinalzoom={x:x,y:y}:(coordsouris=xmouseverscourbe(numdynamique,x,y),oldpointbrillant=numpointbrillant,numpointbrillant=cherchepoint(numdynamique,coordsouris.x,coordsouris.y),oldpointprillant!==numpointbrillant&&(affichetooltip=!0,affichagevaleurgraphtooltip.style.display="inline-block ")))}),leschartdynamiques[e].addEventListener("mousedown",e=>{if(numdynamique=e.target.getAttribute("data-numcanvas"),lecvlorsduzoom=numdynamique,rect=e.target.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,x=x/cvgraph[numdynamique].offsetWidth*largeurcanvasgr[numdynamique],y=y/cvgraph[numdynamique].offsetHeight*hauteurcanvasgr[numdynamique],x>largeurcanvasgr[numdynamique]*margex&&x<largeurcanvasgr[numdynamique]*(1-margex)&&y>hauteurcanvasgr[numdynamique]*margey&&y<hauteurcanvasgr[numdynamique]*(1-margey)&&(pointoriginezoom={x:x,y:y},pointfinalzoom={x:x,y:y},reglagezoomencours=!0,numcanvaszoomencours=numdynamique),x>largeurcanvasgr[numdynamique]*(1-2*margex)&&y>hauteurcanvasgr[numdynamique]*(1-margey))for(nouvelxmax=arrayxmax[numdynamique]+.5*(arrayxmax[numdynamique]-arrayxmin[numdynamique]),j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(arrayxmax[j]=nouvelxmax,nouvelxmax-arrayxmin[j]>maxdelta&&(arrayxmin[j]=arrayxmax[j]-maxdelta),contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]));if(x<largeurcanvasgr[numdynamique]*(3*margex)&&y>hauteurcanvasgr[numdynamique]*(1-margey))for(nouvelxmin=arrayxmin[numdynamique]-.5*(arrayxmax[numdynamique]-arrayxmin[numdynamique]),j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(arrayxmin[j]=nouvelxmin,contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]));x<largeurcanvasgr[numdynamique]*margex&&y<hauteurcanvasgr[numdynamique]*(1-margey)&&y>hauteurcanvasgr[numdynamique]*(1-3*margey)&&(arrayymin[numdynamique]=arrayymin[numdynamique]-.5*(arrayymax[numdynamique]-arrayymin[numdynamique]),contextgraph[numdynamique].clearRect(0,0,cvgraph[numdynamique].width,cvgraph[numdynamique].height),contextdynamique[numdynamique].clearRect(0,0,cvdynamique[numdynamique].width,cvdynamique[numdynamique].height),traceaxesetcourbes(numdynamique,arrayxmin[numdynamique],arrayxmax[numdynamique],arrayymin[numdynamique],arrayymax[numdynamique])),x<largeurcanvasgr[numdynamique]*margex&&y<hauteurcanvasgr[numdynamique]*(3*margey)&&(arrayymax[numdynamique]=arrayymax[numdynamique]+.5*(arrayymax[numdynamique]-arrayymin[numdynamique]),arrayymax[numdynamique]-arrayymin[numdynamique]>maxdelta&&(arrayymin[numdynamique]=arrayymax[numdynamique]-maxdelta),contextgraph[numdynamique].clearRect(0,0,cvgraph[numdynamique].width,cvgraph[numdynamique].height),contextdynamique[numdynamique].clearRect(0,0,cvdynamique[numdynamique].width,cvdynamique[numdynamique].height),traceaxesetcourbes(numdynamique,arrayxmin[numdynamique],arrayxmax[numdynamique],arrayymin[numdynamique],arrayymax[numdynamique]))}),leschartdynamiques[e].addEventListener("mouseup",e=>{if(numdynamique=e.target.getAttribute("data-numcanvas"),rect=e.target.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top,x=x/cvgraph[numdynamique].offsetWidth*largeurcanvasgr[numdynamique],y=y/cvgraph[numdynamique].offsetHeight*hauteurcanvasgr[numdynamique],reglagezoomencours&&(reglagezoomencours=!1,pointzoom1=xmouseverscourbe(lecvlorsduzoom,pointoriginezoom.x,pointoriginezoom.y),pointzoom2=xmouseverscourbe(lecvlorsduzoom,pointfinalzoom.x,pointfinalzoom.y),Math.abs((pointfinalzoom.x-pointoriginezoom.x)/largeurcanvasgr[numdynamique])>.005&&Math.abs((pointfinalzoom.y-pointoriginezoom.y)/hauteurcanvasgr[numdynamique])>.005))for(arrayymax[lecvlorsduzoom]=Math.max(pointzoom1.y,pointzoom2.y),arrayymin[lecvlorsduzoom]=Math.min(pointzoom1.y,pointzoom2.y),j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(arrayxmin[j]=Math.min(pointzoom1.x,pointzoom2.x),arrayxmax[j]=Math.max(pointzoom1.x,pointzoom2.x),contextgraph[j].clearRect(0,0,cvgraph[j].width,cvgraph[j].height),contextdynamique[j].clearRect(0,0,cvdynamique[j].width,cvdynamique[j].height),traceaxesetcourbes(j,arrayxmin[j],arrayxmax[j],arrayymin[j],arrayymax[j]))})}}function affichemodalscreencap(){modalcaptureecran.style.display="block"}function screencap(){switch(typedecapture=document.querySelector("input[name=captureecran]:checked").value,cvtrajectoire=document.getElementById("cv1"),typedecapture){case"transparent":var e=cvtrajectoire.toDataURL("image/png");(t=document.createElement("a")).download="Screenshot.png",t.href=e,t.click();break;case"blanc":case"noir":couleurfond="#FFFFFF","blanc"==typedecapture&&(couleurfond="#FFFFFF"),"noir"==typedecapture&&(couleurfond="#000000"),destinationCanvas=document.createElement("canvas"),destinationCanvas.width=cvtrajectoire.width,destinationCanvas.height=cvtrajectoire.height,destCtx=destinationCanvas.getContext("2d"),destCtx.beginPath(),destCtx.rect(0,0,cvtrajectoire.width,cvtrajectoire.height),destCtx.fillStyle=couleurfond,destCtx.fill(),destCtx.drawImage(cvtrajectoire,0,0),destinationCanvas.toDataURL();e=destinationCanvas.toDataURL("image/png");(t=document.createElement("a")).download="Screenshot.png",t.href=e,t.click();break;case"incruste":videopourcapture=document.getElementById("monfilm"),destinationCanvas=document.createElement("canvas"),destinationCanvas.width=cvtrajectoire.width,destinationCanvas.height=cvtrajectoire.height,destCtx=destinationCanvas.getContext("2d"),destCtx.drawImage(videopourcapture,0,0,videopourcapture.videoWidth,videopourcapture.videoHeight,0,0,cvtrajectoire.width,cvtrajectoire.height),destCtx.drawImage(cvtrajectoire,0,0),destinationCanvas.toDataURL();var t;e=destinationCanvas.toDataURL("image/png");(t=document.createElement("a")).download="Screenshot.png",t.href=e,t.click()}}function exportpng(){for(cvchart=document.getElementById("chartmeca"),destinationCanvas=document.createElement("canvas"),largeurpng=0,nbgraph=0,margepng=80,hauteurpng=2*margepng,j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(nbgraph++,nbgraph%2&&(hauteurpng+=cvgraph[j].height),largeurpng=cvgraph[j].width+margepng);if(0!=nbgraph){for(nbgraph>1?largeurpng=2*largeurpng+margepng:largeurpng+=margepng,destinationCanvas.width=largeurpng,destinationCanvas.height=hauteurpng,destCtx=destinationCanvas.getContext("2d"),gradient=destCtx.createLinearGradient(0,0,largeurpng,hauteurpng),gradient.addColorStop(0,"#6f7273"),gradient.addColorStop(1,"#404040"),destCtx.fillStyle=gradient,destCtx.fillRect(0,0,largeurpng,hauteurpng),nbgraph=0,j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(nbgraph++,destCtx.drawImage(cvgraph[j],margepng+(nbgraph-1)%2*(cvgraph[j].width+margepng),margepng+Math.trunc((nbgraph-1)/2)*cvgraph[j].height),destCtx.drawImage(cvdynamique[j],margepng+(nbgraph-1)%2*(cvgraph[j].width+margepng),margepng+Math.trunc((nbgraph-1)/2)*cvgraph[j].height));destinationCanvas.toDataURL();var e=destinationCanvas.toDataURL("image/png"),t=document.createElement("a");t.download="Mecachrono.png",t.href=e,t.click()}}function flecheaxe(e,t,a,i,n,A,o){contextgraph[e].save(),contextgraph[e].beginPath(),contextgraph[e].fillStyle=o,contextgraph[e].shadowOffsetX=0,contextgraph[e].shadowOffsetY=0,contextgraph[e].shadowBlur=2,contextgraph[e].shadowColor="rgba(0,0,0, 1)";var l=i-t,r=n-a,s=Math.sqrt(l*l+r*r),c=r/s,u=l/s,d=[];d.push(0,0);for(var m=0;m<A.length;m+=2){var p=A[m],g=A[m+1];d.push(p<0?s+p:p,g)}d.push(s,0);for(m=A.length;m>0;m-=2){p=A[m-2],g=A[m-1];d.push(p<0?s+p:p,-g)}d.push(0,0);for(m=0;m<d.length;m+=2){p=d[m]*u-d[m+1]*c+t,g=d[m]*c+d[m+1]*u+a;0===m?contextgraph[e].moveTo(p,g):contextgraph[e].lineTo(p,g)}contextgraph[e].fill(),contextgraph[e].restore()}function traceaxesetcourbes(e,t,a,n,A){if(Math.abs(a-t)<mindelta&&(arrayxmax[e]=t+mindelta,a=arrayxmax[e]),Math.abs(A-n)<mindelta&&(arrayymax[e]=n+mindelta,A=arrayymax[e]),Math.abs(a-t)>maxdelta&&(arrayxmax[e]=t+maxdelta,a=arrayxmax[e]),Math.abs(A-n)>maxdelta&&(arrayymax[e]=n+maxdelta,A=arrayymax[e]),largeurcanvasgr[e]=cvgraph[e].width,hauteurcanvasgr[e]=cvgraph[e].height,deltax=a-t,deltay=A-n,nbintervallex=10,nbintervalley=10,unitex[e]=deltax/nbintervallex,unitey[e]=deltay/nbintervalley,unitex[e]=parseFloat(unitex[e].toPrecision(1)),unitey[e]=parseFloat(unitey[e].toPrecision(1)),vrainbintervallex=Math.trunc(deltax/unitex[e]),vrainbintervalley=Math.trunc(deltay/unitey[e]),contextgraph[e].lineWidth=1,n+vrainbintervalley*unitey[e]<A&&vrainbintervalley++,t+vrainbintervallex*unitex[e]<a&&vrainbintervallex++,axexminentier=Math.trunc(t/unitex[e])*unitex[e],t<0&&(axexminentier-=unitex[e]),axeyminentier=Math.trunc(n/unitey[e])*unitey[e],n<0&&(axeyminentier-=unitey[e]),echellex[e]=(a-t)/largeurcanvasgr[e]/(1-2.5*margex),echelley[e]=(A-n)/hauteurcanvasgr[e]/(1-2.5*margey),depassegraduationy=.1*unitey[e],depassegraduationx=.1*unitex[e]*hauteurcanvasgr[e]/largeurcanvasgr[e],contextgraph[e].save(),contextgraph[e].strokeStyle="#000",flecheaxe(e,margex*largeurcanvasgr[e],(1-.9*margey)*hauteurcanvasgr[e],margex*largeurcanvasgr[e],margey/2*hauteurcanvasgr[e],[0,1,-10,1,-10,5],"#fff"),flecheaxe(e,.95*margex*largeurcanvasgr[e],(1-margey)*hauteurcanvasgr[e],(1-3*margex/4)*largeurcanvasgr[e],(1-margey)*hauteurcanvasgr[e],[0,1,-10,1,-10,5],"#fff"),e==afficheflechedynamique&&(facteur=5e-4*largeurcanvasgr[e]+.2,flecheaxe(e,1.6*margex*largeurcanvasgr[e],(1-.4*margey)*hauteurcanvasgr[e],1.2*margex*largeurcanvasgr[e],(1-.4*margey)*hauteurcanvasgr[e],[0,7*facteur,4*facteur,7*facteur,4*facteur,2,-20*facteur,2,-20*facteur,10*facteur],"#fff"),flecheaxe(e,(1-2*margex)*largeurcanvasgr[e],(1-.4*margey)*hauteurcanvasgr[e],(1-1.6*margex)*largeurcanvasgr[e],(1-.4*margey)*hauteurcanvasgr[e],[0,7*facteur,4*facteur,7*facteur,4*facteur,2,-20*facteur,2,-20*facteur,10*facteur],"#fff"),flecheaxe(e,.3*margex*largeurcanvasgr[e],(1-1.6*margey)*hauteurcanvasgr[e],.3*margex*largeurcanvasgr[e],(1-1.2*margey)*hauteurcanvasgr[e],[0,7*facteur,4*facteur,7*facteur,4*facteur,2,-20*facteur,2,-20*facteur,10*facteur],"#fff"),flecheaxe(e,.3*margex*largeurcanvasgr[e],1.6*margey*hauteurcanvasgr[e],.3*margex*largeurcanvasgr[e],1.2*margey*hauteurcanvasgr[e],[0,7*facteur,4*facteur,7*facteur,4*facteur,2,-20*facteur,2,-20*facteur,10*facteur],"#fff")),fontsizelabel=40,contextgraph[e].font=fontsizelabel+"px Arial",contextgraph[e].fillStyle="#fff",contextgraph[e].textAlign="center",contextgraph[e].textBaseline="bottom",longueurmot=contextgraph[e].measureText(jolinompropr[0]).width,longueurmot>largeurcanvasgr[e]*(1-2*margex)/8)do{fontsizelabel*=.9,contextgraph[e].font=fontsizelabel+"px Arial"}while(contextgraph[e].measureText(jolinompropr[0]).width>largeurcanvasgr[e]*(1-2*margex)/8);if(contextgraph[e].fillText(jolinompropr[getC],(1-1*margex/2)*largeurcanvasgr[e],(1-.5*margey)*hauteurcanvasgr[e]),contextgraph[e].textAlign="right",contextgraph[e].textBaseline="bottom",contextgraph[e].fillText(jolinompropr[e],1.1*margex*largeurcanvasgr[e],.4*margey*hauteurcanvasgr[e]),fontsizenombre=20,contextgraph[e].font=fontsizenombre+"px Arial",contextgraph[e].fillStyle="#eee",contextgraph[e].textBaseline="top",contextgraph[e].textAlign="center",longueurmot=contextgraph[e].measureText(axexminentier.toPrecision(3)).width,longueurmot>largeurcanvasgr[e]*(1-2*margex)/14)do{fontsizenombre*=.9,contextgraph[e].font=fontsizenombre+"px Arial"}while(contextgraph[e].measureText(axexminentier.toPrecision(3)).width>largeurcanvasgr[e]*(1-2*margex)/14);for(xi=1;xi<vrainbintervallex+1;xi++)contextgraph[e].fillText((axexminentier+xi*unitex[e]).toPrecision(3),margex*largeurcanvasgr[e]+(axexminentier-t)/echellex[e]+xi*unitex[e]/echellex[e],(1-.8*margey)*hauteurcanvasgr[e]);for(contextgraph[e].textAlign="right",contextgraph[e].textBaseline="middle",yi=1;yi<vrainbintervalley+1;yi++)contextgraph[e].fillText((axeyminentier+yi*unitey[e]).toPrecision(3),.94*margex*largeurcanvasgr[e],(1-margey)*hauteurcanvasgr[e]-(axeyminentier-n)/echelley[e]-yi*unitey[e]/echelley[e]);for(contextgraph[e].restore(),contextgraph[e].save(),contextgraph[e].setTransform(1/echellex[e],0,0,-1/echelley[e],margex*largeurcanvasgr[e]-t/echellex[e],(1-margey)*hauteurcanvasgr[e]+n/echelley[e]),contextgraph[e].beginPath(),xi=1;xi<vrainbintervallex+1;xi++)contextgraph[e].moveTo(axexminentier+xi*unitex[e],n-depassegraduationy),contextgraph[e].lineTo(axexminentier+xi*unitex[e],n+vrainbintervalley*unitey[e]);for(yi=1;yi<vrainbintervalley+1;yi++)contextgraph[e].moveTo(t-depassegraduationx,axeyminentier+yi*unitey[e]),contextgraph[e].lineTo(t+vrainbintervallex*unitex[e],axeyminentier+yi*unitey[e]);for(contextgraph[e].restore(),contextgraph[e].strokeStyle="#ccc",contextgraph[e].stroke(),contextgraph[e].save(),contextgraph[e].beginPath(),contextgraph[e].rect(margex*largeurcanvasgr[e],margey*hauteurcanvasgr[e],(1-2*margex)*largeurcanvasgr[e],(1-2*margey)*hauteurcanvasgr[e]),contextgraph[e].clip(),contextgraph[e].save(),contextgraph[e].beginPath(),drawSplinesgrperso(e),contextgraph[e].restore(),contextgraph[e].lineWidth=3,contextgraph[e].strokeStyle=listecouleur[e],contextgraph[e].stroke(),contextgraph[e].save(),contextgraph[e].beginPath(),contextgraph[e].fillStyle=listecouleur[e],diametrepoint=Math.min(largeurcanvasgr[e]/120,hauteurcanvasgr[e]/120),i=0;i<laliste.length;i++)contextgraph[e].beginPath(),contextgraph[e].arc(margex*largeurcanvasgr[e]+(lesvalueabscisse[i]-t)/echellex[e],(1-margey)*hauteurcanvasgr[e]-(touteslesvalue[e][i]-n)/echelley[e],diametrepoint,0,6.284),contextgraph[e].fill();contextgraph[e].restore(),contextgraph[e].restore()}function detectdimensionbrowser(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function inittaillevideo(){largeurvw<10&&(largeurvw=10),largeurvw>80&&(largeurvw=80),document.getElementById("cv1").style.cssText+=";width:"+largeurvw+"vw !important;",document.getElementById("monfilmloupe").style.cssText+=";width:"+largeurvw+"vw !important;",document.getElementById("monfilm").style.cssText+=";width:"+largeurvw+"vw !important;",document.getElementById("videoCont").style.cssText+=";width:"+largeurvw+"vw !important;",margevw=(80-largeurvw)/2,document.getElementById("videoCont").style.margin="20px "+margevw+"vw 6px "+margevw+"vw",rayonc=Math.min(vid.offsetWidth,vid.offsetHeight)/4,document.getElementById("divloupecapsule").style.cssText+=";width:"+2*rayonc+"px !important;height:"+2*rayonc+"px !important;",document.getElementById("loupemoinsgauche").style.cssText+=";left:"+(cv.getBoundingClientRect().left-document.getElementById("moncontainer").getBoundingClientRect().left-25)+"px;",document.getElementById("loupeplusgauche").style.cssText+=";left:"+(cv.getBoundingClientRect().left-document.getElementById("moncontainer").getBoundingClientRect().left-25)+"px;",document.getElementById("reglagecouleurgauchepico").style.cssText+=";left:"+(cv.getBoundingClientRect().left-document.getElementById("moncontainer").getBoundingClientRect().left-25)+"px;"}function initplusfondgraphique(){videochargee&&(initcanvas(),laliste.length>0&&echelledejadefinie&&creertramefondgraphique(),inittaillevideo(),infofps.style.right=document.getElementById("monfilm").offsetLeft+"px",infotime.style.left=document.getElementById("monfilm").offsetLeft+"px")}function initcanvas(){lescontainersgraph=document.querySelectorAll(".containercanvasgraph");for(var e=0;e<lescontainersgraph.length;e++)lescontainersgraph[e].style.display="block";for("1"==getA[0]&&0!=getC?(cvgraph[0]=document.getElementById("canvast"),contextgraph[0]=cvgraph[0].getContext("2d"),cvdynamique[0]=document.getElementById("canvdynamiquet"),contextdynamique[0]=cvdynamique[0].getContext("2d")):document.getElementById("idcontcanv0").style.display="none","1"==getA[1]&&1!=getC?(cvgraph[1]=document.getElementById("canvasx"),contextgraph[1]=cvgraph[1].getContext("2d"),cvdynamique[1]=document.getElementById("canvdynamiquex"),contextdynamique[1]=cvdynamique[1].getContext("2d")):document.getElementById("idcontcanv1").style.display="none","1"==getA[2]&&2!=getC?(cvgraph[2]=document.getElementById("canvasy"),contextgraph[2]=cvgraph[2].getContext("2d"),cvdynamique[2]=document.getElementById("canvdynamiquey"),contextdynamique[2]=cvdynamique[2].getContext("2d")):document.getElementById("idcontcanv2").style.display="none","1"==getA[3]&&3!=getC?(cvgraph[3]=document.getElementById("canvasvx"),contextgraph[3]=cvgraph[3].getContext("2d"),cvdynamique[3]=document.getElementById("canvdynamiquevx"),contextdynamique[3]=cvdynamique[3].getContext("2d")):document.getElementById("idcontcanv3").style.display="none","1"==getA[4]&&4!=getC?(cvgraph[4]=document.getElementById("canvasvy"),contextgraph[4]=cvgraph[4].getContext("2d"),cvdynamique[4]=document.getElementById("canvdynamiquevy"),contextdynamique[4]=cvdynamique[4].getContext("2d")):document.getElementById("idcontcanv4").style.display="none","1"==getA[5]&&5!=getC?(cvgraph[5]=document.getElementById("canvasv"),contextgraph[5]=cvgraph[5].getContext("2d"),cvdynamique[5]=document.getElementById("canvdynamiquev"),contextdynamique[5]=cvdynamique[5].getContext("2d")):document.getElementById("idcontcanv5").style.display="none","1"==getA[6]&&6!=getC?(cvgraph[6]=document.getElementById("canvasax"),contextgraph[6]=cvgraph[6].getContext("2d"),cvdynamique[6]=document.getElementById("canvdynamiqueax"),contextdynamique[6]=cvdynamique[6].getContext("2d")):document.getElementById("idcontcanv6").style.display="none","1"==getA[7]&&7!=getC?(cvgraph[7]=document.getElementById("canvasay"),contextgraph[7]=cvgraph[7].getContext("2d"),cvdynamique[7]=document.getElementById("canvdynamiqueay"),contextdynamique[7]=cvdynamique[7].getContext("2d")):document.getElementById("idcontcanv7").style.display="none","1"==getA[8]&&8!=getC?(cvgraph[8]=document.getElementById("canvasa"),contextgraph[8]=cvgraph[8].getContext("2d"),cvdynamique[8]=document.getElementById("canvdynamiquea"),contextdynamique[8]=cvdynamique[8].getContext("2d")):document.getElementById("idcontcanv8").style.display="none","1"==getA[9]&&9!=getC?(cvgraph[9]=document.getElementById("canvasEc"),contextgraph[9]=cvgraph[9].getContext("2d"),cvdynamique[9]=document.getElementById("canvdynamiqueEc"),contextdynamique[9]=cvdynamique[9].getContext("2d")):document.getElementById("idcontcanv9").style.display="none","1"==getA[10]&&10!=getC?(cvgraph[10]=document.getElementById("canvasEp"),contextgraph[10]=cvgraph[10].getContext("2d"),cvdynamique[10]=document.getElementById("canvdynamiqueEp"),contextdynamique[10]=cvdynamique[10].getContext("2d")):document.getElementById("idcontcanv10").style.display="none","1"==getA[11]&&11!=getC?(cvgraph[11]=document.getElementById("canvasEm"),contextgraph[11]=cvgraph[11].getContext("2d"),cvdynamique[11]=document.getElementById("canvdynamiqueEm"),contextdynamique[11]=cvdynamique[11].getContext("2d")):document.getElementById("idcontcanv11").style.display="none",co=0;co<cvgraph.length;co++)"1"==getA[co]&&co!=getC&&(cvgraph[co].style.width="100%",cvgraph[co].style.height="100%",cvgraph[co].width=cvgraph[co].offsetWidth*resolutiongraph,cvgraph[co].height=cvgraph[co].offsetHeight*resolutiongraph,cvdynamique[co].style.width="100%",cvdynamique[co].style.height="100%",cvdynamique[co].width=cvdynamique[co].offsetWidth*resolutiongraph,cvdynamique[co].height=cvdynamique[co].offsetHeight*resolutiongraph,cvdynamique[co].offsetTop=cvgraph[co].offsetTop)}function distagrperso(e,t,a){return Math.sqrt(Math.pow(e[2*t]-e[2*a],2)+Math.pow(e[2*t+1]-e[2*a+1],2))}function vagrperso(e,t,a){return[e[2*a]-e[2*t],e[2*a+1]-e[2*t+1]]}function ctlptsgrperso(e,t,a,i,n,A){var o=vagrperso(arguments,0,2),l=distagrperso(arguments,0,1),r=distagrperso(arguments,1,2),s=l+r;return[a-.4*o[0]*l/s,i-.4*o[1]*l/s,a+.4*o[0]*r/s,i+.4*o[1]*r/s]}function drawSplinesgrperso(e){cps=[],pts=[];for(var t=0;t<touteslesvalue[e].length;t++)void 0!==touteslesvalue[e][t]&&void 0!==lesvalueabscisse[t]&&(valeurdanscv=xcourbeverscanvas(e,lesvalueabscisse[t],touteslesvalue[e][t]),pts.push(valeurdanscv.x),pts.push(valeurdanscv.y));for(t=0;t<pts.length-2;t+=1)cps=cps.concat(ctlptsgrperso(pts[2*t],pts[2*t+1],pts[2*t+2],pts[2*t+3],pts[2*t+4],pts[2*t+5]));drawCurvedPathgrperso(e,cps,pts)}function drawCurvedPathgrperso(e,t,a){var i=a.length/2;if(!(i<2))if(2==i)contextgraph[e].moveTo(a[0],a[1]),contextgraph[e].lineTo(a[2],a[3]);else{contextgraph[e].moveTo(a[0],a[1]),contextgraph[e].quadraticCurveTo(t[0],t[1],a[2],a[3]);for(var n=2;n<i-1;n+=1)contextgraph[e].bezierCurveTo(t[2*(2*(n-1)-1)],t[2*(2*(n-1)-1)+1],t[2*(n-1)*2],t[2*(n-1)*2+1],a[2*n],a[2*n+1]);contextgraph[e].quadraticCurveTo(t[2*(2*(n-1)-1)],t[2*(2*(n-1)-1)+1],a[2*n],a[2*n+1])}}function creertramefondgraphique(){for(touteslesvalue=[],lesvalueabscisse=[],lesmin=[],lesextremetrouve=Array(getA.length-1).fill(!1),lesmax=[],extremeabscitrouve=!1,lalistedevaleur=[],j=0;j<getA.length;j++)"1"==getA[j]&&j!=getC&&(touteslesvalue[j]=[],lalistedevaleur.push(j));for(i=0;i<laliste.length;i++)for(lesvalueabscisse[i]=laliste[i][essaienompropr[getC]],void 0!==lesvalueabscisse[i]&&(extremeabscitrouve?(minabscisse>lesvalueabscisse[i]&&(minabscisse=lesvalueabscisse[i]),maxabscisse<lesvalueabscisse[i]&&(maxabscisse=lesvalueabscisse[i])):(minabscisse=lesvalueabscisse[i],maxabscisse=lesvalueabscisse[i],extremeabscitrouve=!0)),tempo=0;tempo<lalistedevaleur.length;tempo++)void 0!==laliste[i][essaienompropr[lalistedevaleur[tempo]]]&&(touteslesvalue[lalistedevaleur[tempo]][i]=laliste[i][essaienompropr[lalistedevaleur[tempo]]],lesextremetrouve[lalistedevaleur[tempo]]?(lesmin[lalistedevaleur[tempo]]>laliste[i][essaienompropr[lalistedevaleur[tempo]]]&&(lesmin[lalistedevaleur[tempo]]=laliste[i][essaienompropr[lalistedevaleur[tempo]]]),lesmax[lalistedevaleur[tempo]]<laliste[i][essaienompropr[lalistedevaleur[tempo]]]&&(lesmax[lalistedevaleur[tempo]]=laliste[i][essaienompropr[lalistedevaleur[tempo]]])):(lesmin[lalistedevaleur[tempo]]=laliste[i][essaienompropr[lalistedevaleur[tempo]]],lesmax[lalistedevaleur[tempo]]=laliste[i][essaienompropr[lalistedevaleur[tempo]]],lesextremetrouve[lalistedevaleur[tempo]]=!0));if(extremeabscitrouve){for(tmax=laliste[laliste.length-1].tremisazero,tmin=laliste[0].tremisazero,coordmax=Math.max(calculxmax,calculymax),coordmin=Math.min(calculxmin,calculymin),vmax=calculvreelmax,vmin=calculvreelmin,amax=calculamax,amin=calculamin,axexmin=minabscisse,axexmax=maxabscisse,axexmin-=.1*(axexmax-axexmin),axexmax+=.1*(axexmax-axexmin),co=0;co<getA.length;co++)"1"==getA[co]&&co!=getC&&(contextgraph[co].clearRect(0,0,cvgraph[co].width,cvgraph[co].height),arrayxmin[co]=axexmin,arrayxmax[co]=axexmax,arrayymin[co]=lesmin[co],arrayymax[co]=lesmax[co],arrayymin[co]=arrayymin[co]-.1*(arrayymax[co]-arrayymin[co]),arrayymax[co]=arrayymax[co]+.1*(arrayymax[co]-arrayymin[co]),traceaxesetcourbes(co,arrayxmin[co],arrayxmax[co],arrayymin[co],arrayymax[co]));axeyt=!1,axeyxy=!1,axeyv=!1,axeya=!1,premiereposition=!0,cote="left"}}function openOnglet(e,t){var a,i,n;for(ongletencours=t,i=document.getElementsByClassName("classonglet"),a=0;a<i.length;a++)i[a].style.display="none";for(n=document.getElementsByClassName("tablinks"),a=0;a<n.length;a++)n[a].className=n[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active","onglettableau"==ongletencours&&(0==laliste.length?(document.getElementById("infopasdelistetab").style.display="block",document.getElementById("papadivtabulator").style.display="none",document.getElementById("infopasdechelletab").style.display="none"):(document.getElementById("infopasdelistetab").style.display="none",echelledejadefinie?(document.getElementById("papadivtabulator").style.display="block",document.getElementById("infopasdechelletab").style.display="none",setTimeout(table.redraw(),200)):(document.getElementById("papadivtabulator").style.display="none",document.getElementById("infopasdechelletab").style.display="block"))),"ongletgraphique2"==ongletencours&&(0==laliste.length?(document.getElementById("idchartcontain").style.display="none",document.getElementById("infopasdechellegraph").style.display="none",document.getElementById("infopasdelistegraph").style.display="block"):(document.getElementById("infopasdelistegraph").style.display="none",echelledejadefinie?(document.getElementById("idchartcontain").style.display="grid",document.getElementById("infopasdechellegraph").style.display="none",dejainitcanvas?initconfig():(initcanvas(),dejainitcanvas=!0,creertramefondgraphique(),initchartdynamique(),window.requestAnimationFrame(surbrillance))):(document.getElementById("idchartcontain").style.display="none",document.getElementById("infopasdechellegraph").style.display="block")))}function initconfig(){var e=document.querySelectorAll("#valeursaexploit input");lescolonnes=[{title:lesphrasestraduites.numero,field:"name",width:150}],lesdatasets=[],lesyaxes=[],axeyt=!1,axeyxy=!1,axeyv=!1,axeya=!1,dropDown=document.getElementById("axehoriz-select"),getC=dropDown.selectedIndex,getB="";for(var t=document.querySelectorAll("#exportarray input"),a=0;a<t.length;++a)t[a].checked?getB+="1":getB+="0";dropDownlang=document.getElementById("langue-select"),getlang=dropDownlang.selectedIndex,0==getlang&&(getlang="fr"),1==getlang&&(getlang="en"),getE="";var i=document.querySelectorAll("#configdivers input");for(a=0;a<i.length;++a)i[a].checked?getE+="1":getE+="0";autorisationloupeconfig="1"!=getE[1],"1"==getE[4]?(configremiseazer=!0,document.getElementById("idremisazero").innerHTML='<i class="fas fa-history"></i>'):(configremiseazer=!1,document.getElementById("idremisazero").innerHTML='<i class="far fa-clock"></i>'),getD="";var n=document.querySelectorAll("#ongletdispo input");for(a=0;a<n.length;++a)if(n[a].checked)switch(getD+="1",a){case 0:document.getElementById("ongtab").style.display="block";break;case 1:document.getElementById("onggra2").style.display="block";break;case 2:document.getElementById("ongpro").style.display="block";break;case 3:document.getElementById("ongconf").style.display="block"}else switch(getD+="0",a){case 0:document.getElementById("ongtab").style.display="none";break;case 1:document.getElementById("onggra2").style.display="none";break;case 2:document.getElementById("ongpro").style.display="none";break;case 3:document.getElementById("ongconf").style.display="none"}getA="";for(a=0;a<e.length;++a)if(e[a].checked?getA+="1":getA+="0",e[a].checked){switch(adddatasets=void 0,addyaxes=void 0,e[a].dataset.grandeur){case"t":addcolonne={title:lesphrasestraduites.tempsunite,field:"temps",align:"center"};break;case"x":addcolonne={title:lesphrasestraduites.xunite,field:"x",align:"center"};break;case"y":addcolonne={title:lesphrasestraduites.yunite,field:"y",align:"center"};break;case"vx":addcolonne={title:lesphrasestraduites.vxunite,field:"vx",align:"center"};break;case"vy":addcolonne={title:lesphrasestraduites.vyunite,field:"vy",align:"center"};break;case"v":addcolonne={title:lesphrasestraduites.vunite,field:"v",align:"center"};break;case"ax":addcolonne={title:lesphrasestraduites.axunite,field:"ax",align:"center"};break;case"ay":addcolonne={title:lesphrasestraduites.ayunite,field:"ay",align:"center"};break;case"a":addcolonne={title:lesphrasestraduites.aunite,field:"a",align:"center"};break;case"Ec":addcolonne={title:lesphrasestraduites.Ecunite,field:"Ec",align:"center"};break;case"Ep":addcolonne={title:lesphrasestraduites.Epunite,field:"Ep",align:"center"};break;case"Em":addcolonne={title:lesphrasestraduites.Emunite,field:"Em",align:"center"}}lescolonnes.push(addcolonne)}switch(firsttableau?table=new Tabulator("#tablepoints",{clipboard:!0,height:"100%",data:tabledatatabulator,layout:"fitColumns",columns:lescolonnes}):(table.clearData(),firsttableau=!1),getC){case 0:labelaxex=lesphrasestraduites.tempsunite;break;case 1:labelaxex=lesphrasestraduites.xunite;break;case 2:labelaxex=lesphrasestraduites.yunite;break;case 3:labelaxex=lesphrasestraduites.vxunite;break;case 4:labelaxex=lesphrasestraduites.vyunite;break;case 5:labelaxex=lesphrasestraduites.vunite;break;case 6:labelaxex=lesphrasestraduites.axunite;break;case 7:labelaxex=lesphrasestraduites.ayunite;break;case 8:labelaxex=lesphrasestraduites.aunite}firsttableau&&initcanvas(),updatearrayetgraphique()}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function dec2bin(e){return(e>>>0).toString(2).split("").reverse().join("")}function stringToHash(e){var t=0;if(0==(e+="462;-)").length)return t;for(i=0;i<e.length;i++)char=e.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t}function initcheck(){hashvrai=!1,url=window.location.href,lesparampourh=url.substring(1+url.indexOf("?"),url.indexOf("&H=")),lehash=stringToHash(lesparampourh),getH=getParameterByName("H",url),null!==getH&&getH==lehash&&(hashvrai=!0),getA=null!==(getA=getParameterByName("A",url))&&hashvrai?dec2bin(getA):"111000000000";for(var e=0;e<getA.length;++e)if("1"==getA[e])switch(e){case 0:document.getElementById("ckt").checked=!0;break;case 1:document.getElementById("ckx").checked=!0;break;case 2:document.getElementById("cky").checked=!0;break;case 3:document.getElementById("ckvx").checked=!0;break;case 4:document.getElementById("ckvy").checked=!0;break;case 5:document.getElementById("ckv").checked=!0;break;case 6:document.getElementById("ckax").checked=!0;break;case 7:document.getElementById("ckay").checked=!0;break;case 8:document.getElementById("cka").checked=!0}getB=null!==(getB=getParameterByName("B",url))&&hashvrai?dec2bin(getB):"000";for(e=0;e<getB.length;++e)if("1"==getB[e])switch(e){case 0:document.getElementById("ckentete").checked=!0;break;case 1:document.getElementById("ckvirgule").checked=!0;break;case 2:document.getElementById("ckseparationcsv").checked=!0}getE=null!==(getE=getParameterByName("E",url))&&hashvrai?dec2bin(getE):"00100";for(e=0;e<getE.length;++e)if("1"==getE[e])switch(e){case 0:document.getElementById("ckloupedecalee").checked=!0;break;case 1:document.getElementById("ckloupeinterdit").checked=!0;break;case 2:document.getElementById("ckaffichepresentation").checked=!0;break;case 3:document.getElementById("ckforcetranscode").checked=!0;break;case 4:document.getElementById("ckremett0").checked=!0;break;case 5:document.getElementById("pointstransparents").checked=!0;break;case 6:document.getElementById("dernierspointsmasques").checked=!0}"1"==getE[2]?document.getElementById("idpresentation").style.display="block":document.getElementById("idpresentation").style.display="none",autorisationloupeconfig="1"!=getE[1],"1"==getE[4]?(configremiseazer=!0,document.getElementById("idremisazero").innerHTML='<i class="fas fa-history"></i>'):(configremiseazer=!1,document.getElementById("idremisazero").innerHTML='<i class="far fa-clock"></i>'),getCtempo=getParameterByName("C",url),getC=0,null!==getCtempo&&(getCtempo=parseInt(getCtempo),isNaN(getCtempo)||getCtempo>=0&&getCtempo<=8&&(getC=getCtempo)),document.getElementById("axehoriz-select").value=getC,getlangtempo=getParameterByName("lang",url);var t=document.getElementById("langue-select");"en"==getlangtempo&&(t.value=1),getD=null!==(getD=getParameterByName("D",url))&&hashvrai?dec2bin(getD):"1000";for(e=0;e<getD.length;++e)if("1"==getD[e])switch(e){case 0:document.getElementById("cktabl").checked=!0;break;case 1:document.getElementById("ckgraphique").checked=!0;break;case 2:document.getElementById("ckprojet").checked=!0;break;case 3:document.getElementById("ckconfig").checked=!0}initconfig()}function urlconfig(){initconfig(),url=window.location.href,url=url.split("?"),bonparam="A="+parseInt(getA.split("").reverse().join(""),2)+"&B="+parseInt(getB.split("").reverse().join(""),2)+"&C="+getC+"&D="+parseInt(getD.split("").reverse().join(""),2)+"&E="+parseInt(getE.split("").reverse().join(""),2),newurl=url[0]+"?"+bonparam+"&H="+stringToHash(bonparam)+"&lang="+getlang,window.open(newurl,"_blank")}function urlconfigqrcode(){initconfig(),url="qrcode.html",bonparam="A="+parseInt(getA.split("").reverse().join(""),2)+"&B="+parseInt(getB.split("").reverse().join(""),2)+"&C="+getC+"&D="+parseInt(getD.split("").reverse().join(""),2)+"&E="+parseInt(getE.split("").reverse().join(""),2),newurl=url+"?"+bonparam+"&H="+stringToHash(bonparam)+"&lang="+getlang,window.open(newurl,"_blank")}function introdemo(){(intro=introJs()).setOptions({nextLabel:lesphrasestraduites.suiv,prevLabel:lesphrasestraduites.prece,skipLabel:lesphrasestraduites.quit,doneLabel:lesphrasestraduites.fin}),intro.start(ongletencours)}function PourFullScreen(){if(document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen){var e=document.body,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var a=new ActiveXObject("WScript.Shell");null!==a&&a.SendKeys("{F11}")}}else document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}browser_dims=detectdimensionbrowser(),document.getElementById("loupemoinsgauche").addEventListener("click",function(){largeurvw-=10,inittaillevideo()}),document.getElementById("loupeplusgauche").addEventListener("click",function(){largeurvw+=10,inittaillevideo()}),window.addEventListener("resize",initplusfondgraphique,!1),window.addEventListener("orientationchange",initplusfondgraphique,!1),window.onbeforeunload=function(e){var t=lesphrasestraduites.sauveavant;return(e=e||window.event)&&(e.returnValue=t),t};var ready=function(e){if("function"==typeof e)return"complete"===document.readyState?e():void document.addEventListener("DOMContentLoaded",e,!1)};ready(function(){initcheck(),document.getElementById("papaloader").style.display="none",navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")&&(document.getElementById("pourfullscreen").style.display="none")});
